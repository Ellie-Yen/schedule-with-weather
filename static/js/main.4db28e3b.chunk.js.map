{"version":3,"sources":["libs/responseConstructors.ts","libs/dateHelpers.ts","libs/statusConstructors.ts","service/calendarDataReducer.ts","libs/calendarDataConverters.ts","libs/calendarAPIFetchers.ts","libs/weatherAPIFetchers.ts","libs/weatherDataConverters.ts","service/weather3DayDataReducer.ts","service/weatherWeekDataReducer.ts","service/stateControllers.ts","components/appStyleWrappers.tsx","components/IconElements.tsx","components/Loader.tsx","components/DecoBackground.tsx","components/StateComponents.tsx","components/Card.tsx","components/ButtonComponent.tsx","libs/componentEffects.ts","components/SlideShowWrapper.tsx","sections/Weather3DaySection.tsx","components/ChartComponent.tsx","libs/chartHelpers.ts","sections/WeatherWeekSection.tsx","sections/ScheduleSection.tsx","components/SwitchShowElement.tsx","components/MenuWrapper.tsx","components/MyFormElements.tsx","sections/SettingSection.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["exception","error","Error","failed","message","name","Response","status","statusText","tmp","result","code","error2","MSG_MAP","unknown_failed","error_msg","is_success","reason","successFetchCalendarAPI","response","successFetchEventList","event_list","is_example","successFetchWeatherAPI","data","DAY_SEC","checkIsNight","t","hr","getHours","getDateInWeatherAPI","api_time_obj","Date","getDateInCalenderAPI","time_str","date","dateTime","getWeekListIdx","date_obj","current_week_date_list","day_diff","getUTCDay","getCurrentWeekDateList","time_stamp","now","res","day","push","toDisplayDateList","cur_week","map","daytime","SimpFormat","format","DetailFormat","Intl","DateTimeFormat","month","minute","hour","hourCycle","weekday","TimeFormat","getDuration","start_date","end_date","start","end","getDate","valueOf","initStatus","loadingStatus","failedStatus","successStatus","calendarDataReducer","init","fakeEventList","init_schedule","loading","fetched","fetch_result","example_duration","date_to_fit","EXAMPLE","i","length","duration","replaceAll","parseExample","content","sort","a","b","Array","forEach","eventItem","start_idx","end_idx","event_info","summary","location","link","htmlLink","parseCalendar","noEvent","failedData","successData","failed_result","msg","fill","fakeEvent","summary_text","url","no_event_date","empty_schedule","getFullYear","getMonth","year","API","user_calendar_base_url","getCalendarLinkByDate","gapi","window","kwargs","Promise","resolve","asyncFetchHelper","asyncExecute","use_example_data","load","initGAPI","api_key","eventListPage","undefined","asyncFetchEventList","eventListRes","eventList","items","eventPage","asyncFetchEvent","id","eventRes","eventDetail","concat","nextPageToken","client","setApiKey","asyncGAPIRequest","request","getEventListRequestURL","event_id","getEventRequestURL","calendar_id","time_max","time_min","page_params","query_params","base_url","asyncFetchCalendar","asyncFetchWeather_3day","getFetchURL","requestAndFetch","asyncFetchWeather_week","myRequest","Request","fetch","ok","json","success","getCityCode","city","time_span","city_root","WEATHER_CITY_MAP","city_data","cityCode_for_calc","code_3day","city_baseCode","String","padStart","AUTH_PART","authorization_key","cityCode","fields","fetch_fields","query_option","town","emptyWeather12HItemInfo","POP","parse_func_map","Wx","elementList","time","item","startTime","endTime","is_night","weather","elementValue","value","CI","temperature","feeling","RH","getStrWE","PoP12h","PoP6h","val","MinT","parseNumWE","MaxT","getWeatherElementLists","weatherList","records","locations","weatherElement","elementName","parseFloat","weather3DayDataReducer","fakeData","init_weather","weatherLists","wx","rh","ci","pop6h","pop_idx","feel","parseWeather3Day","weatherWeekDataReducer","minT","maxT","pop","weather_list","minTList","maxTList","night","Math","min","max","parseWeatherWeek","RenderDataState","props","React","useState","reducer","state","setStatus","useEffect","fetchFunc","update","getCenterAlignCss","alignItems","justifyContent","gap","getVerticalFlexCss","flexGrow","getHorizonalFlexCss","BigRoundCss","css","SmallRoundCss","CircleSideCss","ShadowCss","CircleCss","RowDiv","styled","div","ColDiv","GridDiv","row","col","getGridCss","RowInGridDiv","gridArea","CenterTitle","h1","IconLabeledElement","SmallIcon","className","icon_cls_name","BigIcon","Big3DIcon","Loader","r","radius","d","w","DecoBackground","DecoBackgroundDiv","DecoImg","src","img_url","alt","img","WeatherDisplayReducer","args","ICON_MAP","empty","getWeatherIconClsName","SpecialWeatherDisplayReducer","WeatherPicReducer","getWeatherPicUrl","defaultWeatherArgs","icons","WEATHER_ICON_MAP","pics","WEATHER_PIC_MAP","VerticalFlexRoundCard","GeneralCardCss","BigGridRoundCard","LeftBorderCard","CircleSideButton","CircleSideBtn","disabled","is_disabled","is_primary","onClick","func","IconCircleButton","CircleBtn","IconTitledButton","Btn","button","makeAnimate","effect_func","elapsed","requestAnimationFrame","makeEffect","timestamp","GetClipPath","SlideShowWrapper","ref_for_effect","useRef","changePage","change_amount","ref_obj","new_page","page","max_page","setTimeout","setPage","current","style","opacity","transform","ref","children","prev_page","next_page","Weather3DaySection","p","Weather3DayPic","item_info","Weather3DayCard","CONTENT_MAP","weather_3day","temperature_unit","title","ChartComponent","x_coords","split_number","x_unit","getXCoords","x_labels","y_coords_list","val_lists","y_coords","flat","minY","maxY","getYPos","getYposFunctionBuilder","vals","getListOfYCoords","vals_lists","y_labels_list","unit_list","ChartContainer","ChartLabelComponent","ChartBody","ChartLabelContainer","x_label","ChartLabelAtX","y_labels","ColAtX","label","ChartLabel","top","MySvg","xmlns","LineGroup","Lines","prevX","prevY","LineAndMarker","x1","y1","x2","y2","MyLineGroup","attributeName","attributeType","type","from","to","begin","dur","repeatCount","MyLine","MyCircle","cx","cy","svg","g","line","circle","WeatherWeekSection","weather_week","display_week","ScheduleSection","WeatherOfDay","weatherState","EventOfDay","calendarState","k","SingleEvent","open","DisplayController","is_hide","setHide","ref_content","stopEvent","event","preventDefault","stopPropagation","nativeEvent","stopImmediatePropagation","switchDisplay","clipPath","delta","hideContentEffect","DynamicContentContainer","hidden","MenuWrapper","MenuBoard","ContentContainer","MyForm","formRef","question","Board","MyFormWrapper","checked","reportValidity","submit_func","canceled","cancel_func","PasswordInputComponent","hidePassword","setHidePassword","setMsg","refInput","validationMessage","password_is_hide","password_is_show","inputType","statusIcon","InputSection","IconContainer","MyInput","onChange","target","setValue","required","SelectInputComponent","HiddenSelectElement","option_list","DummySelectElement","ToggleCheckComponent","MyCheckBox","msg_checked","MyFieldSet","htmlFor","refSelect","focus","HiddenSelect","op","selectItem","DummySelect","extend_content","fold_content","ContentBoard","FormElementCSS","form","input","select","fieldset","SettingSection","setting","WeatherParamSetSection","weatherParam","setWeatherParam","CalendarParamSetSection","calendarParam","setCalendarParam","setCity","setTown","setting_weather","select_city_label","newCity","CITY_MAP","cities","select_town_label","town_list","setAPIKey","setCalendarID","setUseEx","toISOString","setting_calendar","calendar_source_label","calendar_source_msg_checked","calendar_api_key","calendar_api_key_label","calendar_id_label","App","timeState","setTimeState","new_cur_week","useTimeState","refresh","weather3DayState","weatherWeekState","getWeatherWeekState","getCalendarState","Forecast3Day","useMemo","ForecastWeek","Schedule","Setting","setInterval","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4db28e3b.chunk.js","sourcesContent":["import { default as MSG_MAP } from '../datastore/app_msg_map.json';\r\n\r\n/**\r\n * handle no result success\r\n */\r\nexport function success(): SuccessRes {\r\n  return {\r\n    is_success: true\r\n  };\r\n}\r\n\r\n/**\r\n * handle exception errors in [try - catch]\r\n * @param error any unknown type\r\n */\r\nexport function exception(error: unknown): FailedRes{\r\n  if (error instanceof Error){\r\n    return failed(`${error.message} ${error.name}`);\r\n  }\r\n  if (error instanceof Response){\r\n    return failed(`${error.status} ${error.statusText}`);\r\n  }\r\n\r\n  // handle fetching error for gapi\r\n  try {\r\n    const tmp = (error as gapi.client.HttpRequestRejected).result.error;\r\n    return failed(`${tmp.code}, ${tmp.message}`);\r\n  }\r\n  catch (error2){\r\n  }\r\n  return failed(MSG_MAP.unknown_failed);\r\n}\r\n\r\n/**\r\n * @param error_msg string represents the reason why error happened\r\n * @returns FailedRes\r\n */\r\nexport function failed(error_msg: string): FailedRes {\r\n  return {\r\n    is_success: false,\r\n    reason: `${MSG_MAP.failed}: ${error_msg}`\r\n  }\r\n}\r\n\r\n/**\r\n * used in get response from gapi\r\n * @param response request result, CalendarAPIRes\r\n */\r\nexport function successFetchCalendarAPI(response: CalendarAPIRes): SuccessCalendarAPIRes{\r\n  return {\r\n    is_success: true,\r\n    result: response\r\n  }\r\n}\r\n\r\n/**\r\n * this also used in calendar api, as the final out put. (after several fetchings)\r\n * @param event_list Array<EventResource>, unproccessed events of this week\r\n */\r\nexport function successFetchEventList(event_list: Array<EventResource>): SuccessFetchEventListRes{\r\n  return {\r\n    is_success: true,\r\n    result: {\r\n      is_example: false,\r\n      event_list\r\n    }\r\n  };\r\n}\r\n\r\n/**\r\n * this used when we choose to show example calendar data \r\n */\r\n export function successExampleData(): SuccessFetchEventListRes {\r\n  return {\r\n    is_success: true,\r\n    result: {\r\n      is_example: true,\r\n      event_list: []\r\n    }\r\n  };\r\n}\r\n\r\nexport function successFetchWeatherAPI(data: SuccessWeatherAPI_3day | SuccessWeatherAPI_week): SuccessWeatherAPIRes {\r\n  return {\r\n    is_success: true,\r\n    result: data\r\n  };\r\n}\r\n\r\n","const DAY_SEC = 86400000;\r\n\r\n/**\r\n * return true if time is night (18: 00 ~ 6: 00) else false.\r\n * @param t : Date\r\n */\r\nfunction checkIsNight(t: Date): boolean {\r\n  const hr = t.getHours();\r\n  return hr >= 18 || hr < 6;\r\n}\r\n\r\n/**\r\n * the time format is a datetime string represents in taiwan local time\r\n * , this function helps converting them to date.\r\n * @param api_time_obj: string.\r\n * @return Date\r\n */\r\nfunction getDateInWeatherAPI(api_time_obj: string): Date {\r\n  return new Date(api_time_obj + ' +08:00'); // timezone Asia/Taipei\r\n}\r\n\r\n/**\r\n * the time format is different between whole-day/ not-whole-day events\r\n * , this function helps converting them to date.\r\n * @param api_time_obj: an object contains strings represents time\r\n * ,see APITime.\r\n * @return Date\r\n */\r\n function getDateInCalenderAPI(api_time_obj: APITime): Date{\r\n  const time_str: string = \r\n    api_time_obj.date ||\r\n    api_time_obj.dateTime\r\n  ;\r\n  return new Date(time_str);\r\n}\r\n\r\n/**\r\n * @param date_obj Date to get the index\r\n * @param current_week_date_list Array<Date>, as a reference to get index.\r\n * @returns a int as index, represent date_obj is on nth day later from now.\r\n * range n is from 0 ~ 6 (relative position in the week). \r\n */\r\nfunction getWeekListIdx(date_obj: Date, current_week_date_list: Array<Date>): number{\r\n  let day_diff = date_obj.getUTCDay() - current_week_date_list[0].getUTCDay();\r\n  if (day_diff < 0){\r\n    day_diff += 7; \r\n  }\r\n  else if (day_diff > 6){\r\n    day_diff = 6;\r\n  }\r\n  return day_diff;\r\n}\r\n\r\nfunction getCurrentWeekDateList(): Array<Date>{\r\n  let time_stamp = Date.now();\r\n  const res: Array<Date> = [new Date(time_stamp)];\r\n  for (let day = 1; day < 7; day ++){\r\n    time_stamp += DAY_SEC;\r\n    res.push(new Date(time_stamp));\r\n  }\r\n  return res;\r\n}\r\n\r\n/**\r\n * helps turn cur_week into display format for rendering.\r\n * @param cur_week Array<Date> of currrent week.\r\n * @returns Array<string> of current week.\r\n */\r\nexport function toDisplayDateList(cur_week: Array<Date>){\r\n  return cur_week.map(daytime => SimpFormat.format(daytime));\r\n}\r\n\r\nconst DetailFormat = new Intl.DateTimeFormat([], {\r\n  day: \"2-digit\",\r\n  month: \"2-digit\",\r\n  minute: \"2-digit\",\r\n  hour: \"2-digit\",\r\n  hourCycle: 'h24',\r\n  weekday: \"narrow\"\r\n});\r\n\r\nconst SimpFormat = new Intl.DateTimeFormat([], {\r\n  day: \"2-digit\",\r\n  month: \"2-digit\",\r\n  weekday: \"narrow\"\r\n});\r\n\r\nconst TimeFormat = new Intl.DateTimeFormat([], {\r\n  minute: \"2-digit\",\r\n  hour: \"2-digit\",\r\n  hourCycle: 'h24'\r\n});\r\n\r\n\r\nfunction getDuration(start_date: Date, end_date: Date): string {\r\n  const start = DetailFormat.format(start_date);\r\n  const end = (start_date.getDate() === end_date.getDate() &&\r\n    end_date.valueOf() - start_date.valueOf() < DAY_SEC) ?\r\n    TimeFormat.format(end_date):\r\n    DetailFormat.format(end_date);\r\n\r\n  return `${start} ~ ${end}`;\r\n}\r\n\r\nfunction getExampleDuration(example_duration: string, date_to_fit: Date): string{\r\n  return example_duration.replaceAll('t', SimpFormat.format(date_to_fit));\r\n}\r\n\r\nexport {getCurrentWeekDateList, getWeekListIdx, checkIsNight, getDateInWeatherAPI\r\n  ,getDuration, getExampleDuration, getDateInCalenderAPI\r\n}","/**\r\n * used in parse/ dataReducer, indicate the fetch status and data for rendering\r\n */\r\n\r\nexport function initStatus(data: any): {status: 'init', data: typeof data}{\r\n  return {\r\n    status: 'init',\r\n    data\r\n  }\r\n}\r\n\r\nexport function loadingStatus(data: any): {status: 'loading', data: typeof data}{\r\n  return {\r\n    status: 'loading',\r\n    data\r\n  }\r\n}\r\n\r\nexport function failedStatus(data: any): {status: 'failed', data: typeof data}{\r\n  return {\r\n    status: 'failed',\r\n    data\r\n  }\r\n}\r\n\r\nexport function successStatus(data: any): {status: 'success', data: typeof data}{\r\n  return {\r\n    status: 'success',\r\n    data\r\n  }\r\n}","import {exception} from '../libs/responseConstructors';\r\nimport { \r\n  parseCalendar, parseExample, getCalendarLinkByDate\r\n} from '../libs/calendarDataConverters';\r\nimport { \r\n  loadingStatus, initStatus, failedStatus\r\n} from '../libs/statusConstructors';\r\n\r\nimport {default as MSG_MAP} from '../datastore/app_msg_map.json';\r\n\r\n/**\r\n * get data used in rendering WeekCalendarComponents by state\r\n */\r\nexport const calendarDataReducer: CalendarReducer = {\r\n  init: initData,\r\n  loading: loadingData,\r\n  fetched: getDataFromFetchResult\r\n}\r\n\r\nfunction getDataFromFetchResult(fetch_result: SuccessFetchEventListRes | FailedRes, cur_week: Array<Date>): SuccessCalendarState | FailedCalendarState {\r\n  try{\r\n    if (fetch_result.is_success){\r\n      return successData(fetch_result, cur_week);\r\n    }\r\n    return failedData(fetch_result, cur_week);\r\n  }\r\n  catch (error){\r\n    return failedData(exception(error), cur_week);\r\n  }\r\n}\r\n\r\nfunction successData(fetch_result: SuccessFetchEventListRes, cur_week: Array<Date>): SuccessCalendarState | FailedState {\r\n  try{\r\n    if (fetch_result.result.is_example){\r\n      return parseExample(cur_week);\r\n    }\r\n\r\n    const res = parseCalendar(fetch_result, cur_week);\r\n\r\n    for (let day = 0; day < 7; day ++){\r\n\r\n      // if no event, add a link to add event\r\n      if (res.data.event_list[day].length === 0){\r\n        res.data.event_list[day] = [noEvent(cur_week[day])];\r\n      }\r\n    }\r\n    return res;\r\n  }\r\n  catch (error){\r\n    return failedData(exception(error), cur_week);\r\n  }\r\n}\r\n\r\nfunction failedData(failed_result: FailedRes, cur_week: Array<Date>): FailedCalendarState {\r\n  return failedStatus({\r\n    is_example: false,\r\n    event_list: fakeEventList(failed_result.reason)\r\n  });\r\n}\r\n\r\nfunction initData(): InitCalendarState {\r\n  return initStatus({\r\n    is_example: false,\r\n    event_list: fakeEventList(MSG_MAP.init_schedule)\r\n  });\r\n}\r\n\r\nfunction loadingData(): LoadingCalendarState {\r\n  return loadingStatus({\r\n    is_example: false,\r\n    event_list: fakeEventList(MSG_MAP.loading)\r\n  });\r\n}\r\n\r\n/**\r\n * used in loading, failed, init state as spaceholder\r\n * @param msg string to show as summary\r\n */\r\nfunction fakeEventList(msg: string): Array<Array<EventInfo>>{\r\n  const event_list: Array<Array<EventInfo>> = new Array(7);\r\n  event_list.fill([fakeEvent(msg)]);\r\n  return event_list;\r\n}\r\n\r\nfunction fakeEvent(summary_text: string, url: string = ''): EventInfo{\r\n  return {\r\n    summary: summary_text,\r\n    location: '-',\r\n    link: url,\r\n    duration: '-'\r\n  }\r\n}\r\n\r\n/**\r\n * @param no_event_date Date that has 0 event\r\n * @returns a EventInfo that has a hint and link to add event\r\n */\r\nfunction noEvent(no_event_date: Date): EventInfo{\r\n  return fakeEvent(\r\n    MSG_MAP.empty_schedule, \r\n    getCalendarLinkByDate(no_event_date)\r\n  );\r\n}","import {\r\n  getWeekListIdx, getDuration, getExampleDuration, getDateInCalenderAPI\r\n} from './dateHelpers';\r\nimport { successStatus } from './statusConstructors';\r\nimport {default as API} from '../datastore/google_calendar_api_info.json';\r\nimport {default as EXAMPLE} from '../datastore/calendar_example.json';\r\n\r\nexport function parseCalendar(fetch_result: SuccessFetchEventListRes, cur_week: Array<Date>): SuccessCalendarState {\r\n  const content = fetch_result.result;\r\n\r\n  // sort by start time\r\n  content.event_list.sort(((a: EventResource, b: EventResource) => \r\n    a.start - b.start\r\n  ));\r\n\r\n  let event_list: Array<Array<EventInfo>> = new Array(7);\r\n  for (let day = 0; day < 7; day ++){\r\n    event_list[day] = [];\r\n  }\r\n\r\n  content.event_list.forEach(eventItem => {\r\n    const start_date = getDateInCalenderAPI(eventItem.start);\r\n    const end_date = getDateInCalenderAPI(eventItem.end);\r\n\r\n    const start_idx = getWeekListIdx(start_date, cur_week);\r\n    const end_idx = getWeekListIdx(end_date, cur_week);\r\n\r\n    // fill the week by events \r\n    for (let i = start_idx; i <= end_idx; i++){\r\n      const event_info: EventInfo = {\r\n        summary: eventItem.summary,\r\n        location: eventItem.location || 'not set yet',\r\n        link: eventItem.htmlLink,\r\n        duration: getDuration(start_date, end_date)\r\n      }\r\n      event_list[i].push(event_info)\r\n    }\r\n  });\r\n\r\n  return successStatus({\r\n    is_example: false,\r\n    event_list\r\n  })\r\n}\r\n\r\nexport function parseExample(cur_week: Array<Date>): SuccessCalendarState {\r\n  const event_list = EXAMPLE.event_list;\r\n  for (let day = 0; day < 7; day++){\r\n    for (let i = 0; i < event_list[day].length; i++){\r\n      event_list[day][i].duration = \r\n      getExampleDuration(event_list[day][i].duration, cur_week[day])\r\n    }\r\n  }\r\n  return successStatus({\r\n    is_example: true,\r\n    event_list\r\n  });\r\n}\r\n\r\n/**\r\n* @param t Date that has 0 event\r\n* @returns a link to add event\r\n*/\r\nexport function getCalendarLinkByDate(t: Date){\r\n const [year, month, date] = [t.getFullYear(), t.getMonth() + 1, t.getDate()];\r\n return `${API.user_calendar_base_url}${year}/${month}/${date}`;\r\n}","import {default as API} from '../datastore/google_calendar_api_info.json';\r\nimport { \r\n  exception, success, \r\n  successFetchCalendarAPI, successFetchEventList, successExampleData\r\n} from './responseConstructors';\r\n\r\nconst gapi = window.gapi; // don't forget to include gapi script in index.html\r\n\r\n/**\r\n * Fetch user's events in his calendar,\r\n * for this app, we fetch the events of the current week.\r\n * ref: https://developers.google.com/calendar/api/guides/overview\r\n * @param kwargs : CalendarParam, contains following:\r\n * - use_exmaple_data: boolean, indicates the source to use.\r\n * - api_key: str to use google api\r\n * - calendar_id: str, id of fetching calendar\r\n * - time_min, time_max: str, range of time that we want to fetch event list\r\n * @returns a Promise conatins success fetched eventlists or a failed resaon.\r\n */\r\nasync function asyncFetchCalendar(kwargs: CalendarParam): Promise<FailedRes | SuccessFetchEventListRes>{\r\n  // always return a resolved promise\r\n  return new Promise((resolve)=>{\r\n    try {\r\n      if (kwargs.use_example_data){\r\n        resolve(successExampleData());\r\n        return;\r\n      }\r\n      async function asyncFetchHelper() {\r\n        const res = await asyncExecute(kwargs);\r\n        resolve(res);\r\n      }\r\n      gapi.load('client', asyncFetchHelper);\r\n    }\r\n    catch (error){\r\n      resolve(exception(error));\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * the main function of whole process, includes init and fetch.\r\n * @param kwargs CalendarParam contains following:\r\n * - use_exmaple_data: boolean, indicates the source to use.\r\n * - api_key: str to use google api\r\n * - calendar_id: str, id of fetching calendar\r\n * - time_min, time_max: str, range of time that we want to fetch event list\r\n */\r\nasync function asyncExecute(kwargs: CalendarParam): Promise<FailedRes | SuccessFetchEventListRes>{\r\n  try {\r\n    const init = initGAPI(kwargs.api_key);\r\n    if (! init.is_success){\r\n      return init;\r\n    }\r\n    // for each event_list, fetch all holding periods of each event on the list\r\n    // the result of even_list and event periods are paginated. \r\n    let result: Array<EventResource> = [];\r\n    let eventListPage = \"\";\r\n    while (eventListPage !== undefined){\r\n      const eventListRes = await asyncFetchEventList(kwargs, eventListPage);\r\n      if (! eventListRes.is_success){\r\n        return eventListRes;\r\n      }\r\n      const eventList: CalendarAPIContent = eventListRes.result.result;\r\n      for (let eventItem of eventList.items){\r\n        let eventPage = \"\";\r\n        while (eventPage !== undefined){\r\n          const eventRes = await asyncFetchEvent(kwargs, eventItem.id, eventPage);\r\n          if (! eventRes.is_success){\r\n            return eventRes;\r\n          }\r\n          const eventDetail: CalendarAPIContent = eventRes.result.result;\r\n          result = result.concat(eventDetail.items);\r\n          eventPage = eventDetail.nextPageToken;\r\n        }\r\n      }\r\n      eventListPage = eventList.nextPageToken;\r\n    }\r\n    return successFetchEventList(result);\r\n  }\r\n  catch (error: unknown){\r\n    return exception(error);\r\n  }\r\n}\r\n/**\r\n * the function to init google api\r\n * @param api_key : string\r\n */\r\nfunction initGAPI(api_key: string): SuccessRes | FailedRes {\r\n  try {\r\n    gapi.client.setApiKey(api_key);\r\n    return success();\r\n  }\r\n  catch (error) {\r\n    return exception(error);\r\n  }\r\n}\r\n\r\n/**\r\n * helps make a client-side request to google api. \r\n * @param url the url address to make a request.\r\n */\r\nasync function asyncGAPIRequest(url: string): Promise<SuccessCalendarAPIRes | FailedRes>{\r\n  try {\r\n    const res = await gapi.client.request({\r\n      'path': url,\r\n    });\r\n    return successFetchCalendarAPI(res);\r\n  }\r\n  catch (error) {\r\n    return exception(error);\r\n  } \r\n}\r\n\r\n/**\r\n * helps to fetch event_list on page x.\r\n * @param kwargs CalendarParam\r\n * @param nextPageToken string, a gapi provided token to get next page result.\r\n */\r\nasync function asyncFetchEventList(kwargs: CalendarParam, nextPageToken: string = \"\"){\r\n  return await asyncGAPIRequest(getEventListRequestURL(kwargs, nextPageToken));\r\n}\r\n\r\n/**\r\n * helps to fetch all periods of event whose id is event_id on page x.\r\n * @param kwargs CalendarParam\r\n * @param event_id string, an id represents the event of fetching.\r\n * @param nextPageToken string, a gapi provided token to get next page result.\r\n */\r\nasync function asyncFetchEvent(kwargs: CalendarParam, event_id: string, nextPageToken: string = \"\"){\r\n  return await asyncGAPIRequest(getEventRequestURL(kwargs, event_id, nextPageToken));\r\n}\r\n\r\n/**\r\n * return an url that can fetch event_list on page x.\r\n * @param kwargs CalendarParam\r\n * @param nextPageToken string, a gapi provided token to get next page result.\r\n */\r\nfunction getEventListRequestURL(kwargs: CalendarParam, nextPageToken: string = \"\"): string {\r\n  const {calendar_id, time_max, time_min} = kwargs;\r\n  const page_params = nextPageToken === ''?\r\n    `pageToken=${nextPageToken}&`: '';\r\n  const query_params = `timeMax=${time_max}&timeMin=${time_min}`\r\n  const res = `${API.base_url}${calendar_id}/events?${page_params}${query_params}`;\r\n  return res;\r\n}\r\n\r\n/**\r\n * return an url that can fetch periods of an event whose id is event_id on page x.\r\n * @param kwargs CalendarParam\r\n * @param event_id string, an id represents the event of fetching.\r\n * @param nextPageToken string, a gapi provided token to get next page result.\r\n */\r\nfunction getEventRequestURL(kwargs: CalendarParam, event_id: string, nextPageToken: string = \"\"): string{\r\n  const {calendar_id, time_max, time_min} = kwargs;\r\n  const page_params = nextPageToken === ''?\r\n    `pageToken=${nextPageToken}&`: '';\r\n  const query_params = `timeMax=${time_max}&timeMin=${time_min}`\r\n  const res = `${API.base_url}${calendar_id}/events/${event_id}/instances?${page_params}${query_params}`;\r\n  return res;\r\n}\r\n\r\nexport default asyncFetchCalendar;","import { failed, exception, successFetchWeatherAPI } from './responseConstructors';\r\n\r\nimport {default as API} from '../datastore/weather_api_info.json';\r\nimport {default as WEATHER_CITY_MAP} from '../datastore/weather_city_map.json';\r\n// fetching Weather data\r\n// all encoding is based on weather api(v1)\r\n\r\n/**\r\n * fetch 3 day forecast of this location.\r\n * @param location: WeatherParam contains:\r\n * - city str of city name\r\n * - town str of town name\r\n * @returns a json conatins SuccessWeatherAPI_3day if success,\r\n * else a FailedRes\r\n */\r\n export async function asyncFetchWeather_3day(location: WeatherParam): Promise<FailedRes | SuccessWeatherAPIRes>{\r\n  const url = getFetchURL(location, 3);\r\n  if (! url){\r\n    return failed('invalid location');\r\n  }\r\n  return await requestAndFetch(url);\r\n}\r\n\r\n/**\r\n * fetch week forecast of this location.\r\n * @param city str of city name\r\n * @param town str of town name\r\n * @returns a json conatins SuccessWeatherAPI_week if success,\r\n * else a FailedRes\r\n */\r\nexport async function asyncFetchWeather_week(location: WeatherParam): Promise<FailedRes | SuccessWeatherAPIRes>{\r\n  const url = getFetchURL(location, 7);\r\n  if (! url){\r\n    return failed('invalid location');\r\n  }\r\n  return await requestAndFetch(url);\r\n}\r\n\r\n/**\r\n * \r\n * @param url: string, the url of api to request\r\n * @returns a json conatins SuccessWeatherAPI_3day / SuccessWeatherAPI_week if success,\r\n * else a FailedRes\r\n */\r\nasync function requestAndFetch(url: string): Promise<SuccessWeatherAPIRes | FailedRes>{\r\n  try {\r\n    const myRequest = new Request(url);\r\n    const res = await fetch(myRequest);\r\n    if ( ! res.ok){\r\n      return exception(res);\r\n    }\r\n    const data = await res.json();\r\n\r\n    // sometimes http status is fine but get error\r\n    const error_msg = (data as FailedWeatherAPI).message;\r\n    if (error_msg){\r\n      return failed(`failed to fetch, ${error_msg}`);\r\n    }\r\n    if (! data.success){\r\n      return failed(`failed to fetch, unknown api status`);\r\n    }\r\n    return successFetchWeatherAPI(data);\r\n  }\r\n  catch (error){\r\n    return exception(error);\r\n  }\r\n}\r\n\r\n/**\r\n @returns a code used for url in fetching weather api\r\n * or undefined if the city is not on the list.\r\n @param city string of name.\r\n @param time_span int, represents the time_span of forecast,\r\n * acceptable values are 3 and 7.\r\n*/\r\nfunction getCityCode(city: string, time_span: number = 3): string | undefined {\r\n  type citykey = keyof typeof WEATHER_CITY_MAP.city_data;\r\n  const city_root = WEATHER_CITY_MAP.city_data[city as citykey];\r\n  if (! city_root){\r\n    return ;\r\n  }\r\n  let cityCode_for_calc = city_root.code_3day;\r\n  if (time_span === 7){\r\n    cityCode_for_calc += 2;\r\n  }\r\n  return WEATHER_CITY_MAP.city_baseCode + String(cityCode_for_calc).padStart(3, \"0\");\r\n}\r\n\r\n/**\r\n @returns an url in fetching weather api\r\n * or undefined if the city is not on the list.\r\n @param location: WeatherParam contains:\r\n * - city str of city name\r\n * - town str of town name\r\n @param time_span int, represents the time_span of forecast,\r\n * acceptable values are 3 and 7.\r\n*/\r\nfunction getFetchURL(location: WeatherParam, time_span: number = 3): string | undefined {\r\n  const AUTH_PART = `Authorization=${API.authorization_key}`;\r\n\r\n  const cityCode = getCityCode(location.city, time_span);\r\n  if (! cityCode){\r\n    return;\r\n  }\r\n\r\n  type field_key = keyof typeof WEATHER_CITY_MAP.fetch_fields;\r\n  const code = String(time_span);\r\n  const fields = WEATHER_CITY_MAP.fetch_fields[code as field_key];\r\n  const query_option = `locationName=${location.town}&elementName=${fields}&sort=time`;\r\n  return `${API.base_url}${cityCode}?${query_option}&${AUTH_PART}`;\r\n}\r\n","import { \r\n  getDuration, getDateInWeatherAPI, \r\n  checkIsNight, getWeekListIdx \r\n} from \"./dateHelpers\";\r\nimport { successStatus } from './statusConstructors';\r\n\r\nexport function parseWeather3Day(fetch_result: SuccessWeatherAPIRes): SuccessWeather3DayState{\r\n  const weatherLists = getWeatherElementLists(fetch_result);\r\n  const wx = weatherLists.Wx;\r\n  const rh = weatherLists.RH;\r\n  const ci = weatherLists.CI;\r\n  const pop6h = weatherLists.PoP6h;\r\n  const data = new Array<Weather3DayItemInfo>(wx.length);\r\n  let pop_idx = 0; // other item is listed per 3 hr, but pop is per 6 hr\r\n\r\n  for (let i = 0; i < wx.length; i++){\r\n    if (pop_idx + 1 < wx.length &&\r\n      wx[i].start === pop6h[pop_idx + 1].start){\r\n      pop_idx += 1;\r\n    }\r\n    data[i] = {\r\n      duration: wx[i].duration,\r\n      is_night: wx[i].is_night,\r\n      weather: wx[i].weather,\r\n      code: wx[i].code,\r\n      temperature: ci[i].temperature,\r\n      feel: ci[i].feeling,\r\n      RH: rh[i],\r\n      POP: pop6h[pop_idx].val\r\n    }\r\n  } \r\n  return successStatus(data);\r\n}\r\n\r\nexport function parseWeatherWeek(fetch_result: SuccessWeatherAPIRes, cur_week: Array<Date>): SuccessWeatherWeekState{\r\n  const weatherLists = getWeatherElementLists(fetch_result);\r\n  const wx = weatherLists.Wx;\r\n  const minT = weatherLists.MinT;\r\n  const maxT = weatherLists.MaxT;\r\n  const pop = weatherLists.PoP12h;\r\n\r\n  const weather_list = new Array<WeatherWeekItemInfo>(7);\r\n  const minTList = new Array<number>(7);\r\n  const maxTList = new Array<number>(7);\r\n\r\n  let day = getWeekListIdx(wx[0].start, cur_week);\r\n\r\n  for (let i = 0; i < wx.length; i++){\r\n    \r\n    // handle temperature (minT/ maxT/ range) and add new item \r\n    if (minTList[day] === undefined){\r\n      minTList[day] = minT[i];\r\n      maxTList[day] = maxT[i];\r\n\r\n      weather_list[day] = {\r\n        day: emptyWeather12HItemInfo,\r\n        night: emptyWeather12HItemInfo\r\n      };\r\n    }\r\n    else {\r\n      minTList[day] = Math.min(minT[i], minTList[day]);\r\n      maxTList[day] = Math.max(maxT[i], maxTList[day]);\r\n    }\r\n\r\n    // ensure time span and add weather\r\n    if (wx[i].is_night){\r\n      weather_list[day].night = {\r\n        code: wx[i].code,\r\n        POP: pop[i]\r\n      };\r\n      day ++;\r\n      continue;\r\n    }\r\n    \r\n    weather_list[day].day = {\r\n      code: wx[i].code,\r\n      POP: pop[i]\r\n    };\r\n  }  \r\n  return successStatus({\r\n    weather_list,\r\n    temperature: {\r\n      minT: minTList,\r\n      maxT: maxTList\r\n    }\r\n  });\r\n}\r\n\r\nconst emptyWeather12HItemInfo: Weather12HItemInfo = {\r\n  code: '00',\r\n  POP: '-'\r\n}\r\n\r\ntype WeatherElementLists = {\r\n  Wx: Array<WxData>,\r\n  CI: Array<CIData>,\r\n  RH: Array<string>,\r\n  PoP12h: Array<string>,\r\n  PoP6h: Array<TimeValData>,\r\n  MinT: Array<number>,\r\n  MaxT: Array<number>\r\n}\r\n\r\ntype WeatherElementFuncMap = {\r\n  [Property in keyof WeatherElementLists]: Function\r\n}\r\n\r\nconst parse_func_map: WeatherElementFuncMap = {\r\n  Wx: parseWx,\r\n  CI: parseCI,\r\n  RH: getStrWE,\r\n  PoP12h: getStrWE,\r\n  PoP6h: parsePoP6h,\r\n  MinT: parseNumWE,\r\n  MaxT: parseNumWE\r\n}\r\n\r\n/**\r\n * we fetch only a town in a city, with several weatherElements\r\n * @param fetch_result SuccessWeatherAPIRes\r\n * @returns an object contains mutiple weather elements that we asked in api\r\n */\r\nfunction getWeatherElementLists(fetch_result: SuccessWeatherAPIRes): WeatherElementLists{\r\n  const weatherList = fetch_result.result.records.locations[0].location[0].weatherElement;\r\n  let res: WeatherElementLists = {\r\n    Wx: [],\r\n    CI: [],\r\n    RH: [],\r\n    PoP12h: [],\r\n    PoP6h: [],\r\n    MinT: [],\r\n    MaxT: []\r\n  };\r\n  for (let weatherElement of weatherList){\r\n    const t = weatherElement.elementName;\r\n    res[t] = parse_func_map[t](weatherElement);\r\n  }\r\n  return res;\r\n}\r\n\r\ninterface WxData {\r\n  start: Date,\r\n  duration: string,\r\n  is_night: boolean,\r\n  weather: string,\r\n  code: string\r\n}\r\n\r\n/**\r\n * @returns an array of objects contains following key:\r\n * - start: Date, the startTime of the periods for aligning with other items.\r\n * - duration: string, duration of the periods for rendering.\r\n * - is_night: bool, for rendering day/night components\r\n * - weather: string, weather description.\r\n * - code: string, the code to represents the weather above.\r\n */\r\nfunction parseWx(elementList: Wx): Array<WxData>{\r\n  return elementList.time.map(item => {\r\n    const start = getDateInWeatherAPI(item.startTime);\r\n    return {\r\n      start: start,\r\n      duration: getDuration(start, getDateInWeatherAPI(item.endTime)),\r\n      is_night: checkIsNight(start),\r\n      weather: item.elementValue[0].value,\r\n      code: item.elementValue[1].value\r\n    }\r\n  });\r\n}\r\n\r\ninterface CIData {\r\n  temperature: string,\r\n  feeling: string\r\n}\r\n/**\r\n * @returns an array of objects contains following key:\r\n * - temperature: string\r\n * - feeling: string, ci description\r\n */\r\nfunction parseCI(elementList: CI): Array<CIData>{\r\n  return elementList.time.map(item => ({\r\n    temperature: item.elementValue[0].value,\r\n    feeling: item.elementValue[1].value\r\n  }));\r\n}\r\n\r\ninterface TimeValData {\r\n  val: string,\r\n  start: Date\r\n}\r\n\r\n/**\r\n * Return startTime that used in alignment,\r\n * since Pop6h (used in weather3Day) has update frequency of (1/ 6hr)\r\n * that is different to others (1/ 3hr).\r\n * @returns an array of objects contains following key:\r\n * - start: Date, the startTime of the periods for aligning with other items.\r\n * - val: string typed PoP6h\r\n */\r\nfunction parsePoP6h(elementList: PoP6h): Array<TimeValData>{\r\n  return elementList.time.map(item => ({\r\n    start: getDateInWeatherAPI(item.startTime),\r\n    val: `${item.elementValue[0].value} %`\r\n  }));\r\n}\r\n\r\n/**\r\n * @returns an array of MinT | MaxT value in number type\r\n */\r\nfunction parseNumWE(elementList: MinT | MaxT): Array<number> {\r\n  return elementList.time.map(item => (\r\n    parseFloat(item.elementValue[0].value)\r\n  ));\r\n}\r\n\r\n/**\r\n * @returns an array of RH | PoP12h value in string type\r\n */\r\nfunction getStrWE(elementList: RH | PoP12h): Array<string> {\r\n  return elementList.time.map(item => (\r\n    `${item.elementValue[0].value} %`\r\n  ));\r\n}","import { exception } from \"../libs/responseConstructors\";\r\nimport { parseWeather3Day } from \"../libs/weatherDataConverters\";\r\nimport { \r\n  loadingStatus, initStatus, failedStatus\r\n} from '../libs/statusConstructors';\r\n\r\nimport {default as MSG_MAP} from '../datastore/app_msg_map.json';\r\n\r\nexport const weather3DayDataReducer: Weather3DayReducer = {\r\n  init: initData,\r\n  loading: loadingData,\r\n  fetched: getDataFromFetchResult\r\n}\r\n\r\nfunction getDataFromFetchResult(fetch_result: SuccessWeatherAPIRes | FailedRes, cur_week: Array<Date>): SuccessWeather3DayState | FailedWeather3DayState {\r\n  try{\r\n    if (fetch_result.is_success){\r\n      return successData(fetch_result, cur_week);\r\n    }\r\n    return failedData(fetch_result, cur_week);\r\n  }\r\n  catch (error){\r\n    return failedData(exception(error), cur_week);\r\n  }\r\n}\r\n\r\nfunction successData(fetch_result: SuccessWeatherAPIRes, cur_week: Array<Date>): SuccessWeather3DayState | FailedWeather3DayState {\r\n  try{\r\n    return parseWeather3Day(fetch_result);\r\n  }\r\n  catch (error){\r\n    return failedData(exception(error), cur_week);\r\n  }\r\n}\r\n\r\nfunction failedData(failed_result: FailedRes, cur_week: Array<Date>): FailedWeather3DayState {\r\n  return failedStatus(fakeData(failed_result.reason));\r\n}\r\n\r\nfunction initData(): InitWeather3DayState {\r\n  return initStatus(fakeData(MSG_MAP.init_weather));\r\n}\r\n\r\nfunction loadingData(): LoadingWeather3DayState {\r\n  return loadingStatus(fakeData(MSG_MAP.loading));\r\n}\r\n\r\nfunction fakeData(msg: string): Array<Weather3DayItemInfo>{\r\n  return [{\r\n    duration: '',\r\n    is_night: true,\r\n    weather: msg,\r\n    code: '-',\r\n    temperature: '-',\r\n    feel: '-',\r\n    RH: '-',\r\n    POP: '-'\r\n  }];\r\n}\r\n","import { exception } from \"../libs/responseConstructors\";\r\nimport { parseWeatherWeek } from \"../libs/weatherDataConverters\";\r\nimport { \r\n  loadingStatus, initStatus, failedStatus\r\n} from '../libs/statusConstructors';\r\n\r\nimport {default as MSG_MAP} from '../datastore/app_msg_map.json';\r\n\r\nexport const weatherWeekDataReducer: WeatherWeekReducer = {\r\n  init: initData,\r\n  loading: loadingData,\r\n  fetched: getDataFromFetchResult\r\n}\r\n\r\nfunction getDataFromFetchResult(fetch_result: SuccessWeatherAPIRes | FailedRes, cur_week: Array<Date>): SuccessWeatherWeekState | FailedWeatherWeekState {\r\n  try{\r\n    if (fetch_result.is_success){\r\n      return successData(fetch_result, cur_week);\r\n    }\r\n    return failedData(fetch_result, cur_week);\r\n  }\r\n  catch (error){\r\n    return failedData(exception(error), cur_week);\r\n  }\r\n}\r\n\r\nfunction successData(fetch_result: SuccessWeatherAPIRes, cur_week: Array<Date>): SuccessWeatherWeekState {\r\n  return parseWeatherWeek(fetch_result, cur_week);\r\n}\r\n\r\nfunction failedData(failed_result: FailedRes, cur_week: Array<Date>): FailedWeatherWeekState {\r\n  return failedStatus(fakeData(failed_result.reason));\r\n}\r\n\r\nfunction initData(): InitWeatherWeekState {\r\n  return initStatus(fakeData(MSG_MAP.init_weather));\r\n}\r\n\r\nfunction loadingData(): LoadingWeatherWeekState {\r\n  return loadingStatus(fakeData(MSG_MAP.loading));\r\n}\r\n\r\nfunction fakeData(msg: string): WeatherWeekData{\r\n  const weather_list: Array<WeatherWeekItemInfo> = Array(7);\r\n  weather_list.fill({\r\n    day: {\r\n      code: '-',\r\n      POP: msg\r\n    },\r\n    night: {\r\n      code: '-',\r\n      POP: msg\r\n    }\r\n  });\r\n  return {\r\n    weather_list,\r\n    temperature: {\r\n      maxT: [],\r\n      minT: []\r\n    }\r\n  };\r\n}\r\n","import React from 'react';\r\nimport {calendarDataReducer} from './calendarDataReducer';\r\nimport asyncFetchCalendar from '../libs/calendarAPIFetchers';\r\n\r\nimport { getCurrentWeekDateList, toDisplayDateList } from '../libs/dateHelpers';\r\nimport { asyncFetchWeather_3day, asyncFetchWeather_week } from '../libs/weatherAPIFetchers';\r\nimport {weather3DayDataReducer} from './weather3DayDataReducer';\r\nimport {weatherWeekDataReducer} from './weatherWeekDataReducer';\r\n\r\n/**\r\n * @returns [timeState, refresh]\r\n * - timeState a mutable constant, contains following keys:\r\n *    - cur_week: Array<Date> for sorting data in fetching api.\r\n *    - display_week: Array<string> for rendering in components\r\n * - refresh: a static function for refreshing timeState\r\n */\r\nexport function useTimeState(): [TimeState, () => void]{\r\n  const cur_week = getCurrentWeekDateList();\r\n  const [timeState, setTimeState] = React.useState<TimeState>({\r\n    cur_week,\r\n    display_week: toDisplayDateList(cur_week) \r\n  });\r\n  const refresh = () => {\r\n    const new_cur_week = getCurrentWeekDateList();\r\n    setTimeState({\r\n      cur_week: new_cur_week,\r\n      display_week: toDisplayDateList(new_cur_week)\r\n    })\r\n  }\r\n  return [timeState, refresh];\r\n}\r\n\r\ninterface RenderDataStateProps {\r\n  kwargs: any,\r\n  fetchFunc: Function,\r\n  reducer: StateReducer,\r\n  cur_week: Array<Date>\r\n}\r\n/**\r\n * used in rendering components.\r\n * @param kwargs  parameter to pass to fetchFunc\r\n * @param fetchFunc function that return a fetching state\r\n * @param reducer a map contains data processing functions \r\n * to generate data for rendering\r\n * @param cur_week as a param for reducer\r\n * @returns a mutable constant represents the fetching state of api\r\n */\r\nfunction RenderDataState(props: RenderDataStateProps): State {\r\n  // init state\r\n  const [state, setStatus] = React.useState(props.reducer.init());\r\n  React.useEffect(()=>{\r\n    async function update(){\r\n      // set loading\r\n      setStatus(props.reducer.loading());\r\n\r\n      // set final result\r\n      const result = await props.fetchFunc(props.kwargs);\r\n      setStatus(props.reducer.fetched(result, props.cur_week));\r\n    }\r\n    if (props.kwargs !== null){\r\n      update();\r\n    }\r\n    // eslint-disable-next-line\r\n  }, [props.kwargs, props.cur_week]);\r\n  return state;\r\n}\r\n\r\nexport function getCalendarState(kwargs: CalendarParam | null, cur_week: Array<Date>): CalendarState {\r\n  return RenderDataState({\r\n    kwargs,\r\n    fetchFunc: asyncFetchCalendar,\r\n    reducer: calendarDataReducer,\r\n    cur_week\r\n  });\r\n}\r\n\r\nexport function getWeather3DayState(kwargs: WeatherParam | null, cur_week: Array<Date>): Weather3DayState {\r\n  return RenderDataState({\r\n    kwargs,\r\n    fetchFunc: asyncFetchWeather_3day,\r\n    reducer: weather3DayDataReducer,\r\n    cur_week\r\n  });\r\n}\r\n\r\nexport function getWeatherWeekState(kwargs: WeatherParam | null, cur_week: Array<Date>): WeatherWeekState {\r\n  return RenderDataState({\r\n    kwargs,\r\n    fetchFunc: asyncFetchWeather_week,\r\n    reducer: weatherWeekDataReducer,\r\n    cur_week\r\n  });\r\n}","import styled, {css} from \"styled-components\";\r\n\r\nexport function getCenterAlignCss(props: ContainerProps = {}){\r\n  return `\r\n    align-items: ${props.alignItems || 'center'};\r\n    justify-content: ${props.justifyContent || 'center'};\r\n    gap: var(--gap${props.gap || 1});\r\n  `;\r\n}\r\n\r\nexport function getVerticalFlexCss(props: ContainerProps = {}){\r\n  return `\r\n    display: flex;\r\n    flex-grow: ${props.flexGrow || 1};\r\n    flex-direction: column;\r\n    ${getCenterAlignCss(props)}\r\n  `;\r\n}\r\n\r\nexport function getHorizonalFlexCss(props: ContainerProps = {}){\r\n  return `\r\n    display: flex;\r\n    flex-grow: ${props.flexGrow || 1};\r\n    flex-direction: row;\r\n    ${getCenterAlignCss(props)}\r\n  `;\r\n}\r\n\r\nexport function getGridCss(props: ContainerProps = {}){\r\n  return `\r\n    display: grid;\r\n    grid-template: ${props.row || '1fr'} / ${props.col || '1fr'};\r\n    ${getCenterAlignCss(props)}\r\n    grid-gap: var(--gap${props.gap || 1});\r\n  `;\r\n}\r\n\r\nexport function getCircleCss(diameter: string = 'var(--iconsize)'){\r\n  return `\r\n    display: flex;\r\n    border-radius: 100%;\r\n    ${getCenterAlignCss()}\r\n    height: ${diameter};\r\n    width: ${diameter};\r\n  `;\r\n}\r\n\r\nexport const BigRoundCss = css`\r\n  border-radius: var(--iconradius);\r\n  padding: var(--iconradius);\r\n`\r\n\r\nexport const SmallRoundCss = css`\r\n  border-radius: var(--gap1);\r\n  padding: var(--gap1);\r\n`\r\n\r\nexport const CircleSideCss = css`\r\n  border-radius: var(--iconsize);\r\n  height: var(--iconsize);\r\n  min-width: var(--iconsize);\r\n  padding: 5px var(--iconradius);\r\n`;\r\n\r\nexport const ShadowCss = css`\r\n  box-shadow: 0 0 var(--gap3) 1px var(--shadowcolor);\r\n  &:hover {\r\n    box-shadow: var(--gap2) var(--gap2) var(--gap3) 5px var(--shadowcolor);\r\n  }\r\n`\r\nexport const CircleCss = css`\r\n  border-radius: 100%;\r\n  padding: 5px;\r\n  height: var(--iconsize);\r\n  width: var(--iconsize);\r\n`\r\n\r\nexport const RowDiv = styled.div((props: ContainerProps)=>`\r\n  ${getHorizonalFlexCss(props)}\r\n`);\r\n\r\nexport const ColDiv = styled.div((props: ContainerProps)=>`\r\n  ${getVerticalFlexCss(props)}\r\n`);\r\n\r\nexport const GridDiv = styled.div((props: ContainerProps) =>`\r\n  ${getGridCss(props)}\r\n`)\r\n\r\nexport const RowInGridDiv = styled.div((props: ContainerProps) => `\r\n  ${getHorizonalFlexCss(props)}\r\n  grid-area: ${props.gridArea || 'unset'};\r\n`)\r\n\r\nexport const ColInGridDiv = styled.div((props: ContainerProps) => `\r\n  ${getVerticalFlexCss(props)}\r\n  grid-area: ${props.gridArea || 'unset'};\r\n`)\r\n\r\nexport const CenterTitle = styled.h1`\r\n  text-align: center;\r\n`\r\n","import styled from 'styled-components';\r\nimport { RowDiv, ColDiv } from './appStyleWrappers';\r\n\r\ninterface IconLabeledItemProps {\r\n  icon_cls_name: string,\r\n  content: string | JSX.Element\r\n}\r\n\r\nexport function IconLabeledElement(props: IconLabeledItemProps){\r\n  return (\r\n    <RowDiv>\r\n      <SmallIcon className={props.icon_cls_name}/>\r\n      <ColDiv alignItems='start'>\r\n        {props.content}\r\n      </ColDiv>\r\n    </RowDiv>\r\n  );\r\n}\r\n\r\nexport const SmallIcon = styled.i`\r\n  opacity: 0.8;\r\n`\r\n\r\nexport const BigIcon = styled.i`\r\n  font-size: var(--iconsize);\r\n  opacity: 0.5;\r\n`\r\n\r\nexport const Big3DIcon = styled.i`\r\n  font-size: 4rem;\r\n  padding: var(--fontsize_big) 0;\r\n  color: var(--bgcolor);\r\n  text-shadow: -1px 0px 10px var(--bgcolor);\r\n  filter: brightness(1.5) drop-shadow(5px 5px 5px var(--maincolor1));\r\n`","import styled from 'styled-components';\r\n\r\ninterface LoaderProps {\r\n  radius?: 1 | 2 | 3\r\n}\r\n\r\nexport const Loader = styled.div((props: LoaderProps)=>{\r\n  const r = (props.radius || 1) * 30; // radius\r\n  const d = 2 * r; // diameter\r\n  const w = r / 6; // width of circle\r\n  return `\r\n  width: ${d}px;\r\n  height: ${d}px;\r\n  margin: auto;\r\n  background: none;\r\n  position: relative;\r\n  border-radius: 100%;\r\n  \r\n  &:before, &:after {\r\n    content: '';\r\n    position: absolute;\r\n    display: block;\r\n    height: calc(${d}px - ${w * 2}px);\r\n    width: calc(${r}px - ${w}px);\r\n    border: ${w}px solid;\r\n  }\r\n  &:before {\r\n    transform-origin: ${r}px ${r}px;\r\n    animation: RotatingAnime 3s ease infinite;\r\n    border-radius: ${d}px 0 0 ${d}px;\r\n    animation: RotatingAnime 3s ease infinite;\r\n    opacity: 0.8;\r\n    border-color: var(--maincolor1) transparent var(--maincolor1) var(--maincolor1);\r\n  }\r\n  &:after {\r\n    margin-left: calc(${r}px - ${w}px);\r\n    transform-origin: ${w}px ${r}px;\r\n    animation: RotatingAnime 1s ease infinite;\r\n    border-radius: 0 ${d}px ${d}px 0;\r\n    animation: RotatingAnime 3s ease infinite 2s;\r\n    opacity: 0.8;\r\n    border-color: var(--maincolor2) transparent var(--maincolor2) transparent;\r\n  }\r\n`\r\n});","import styled from 'styled-components';\r\n\r\ninterface DecoBackgroundProps {\r\n  img_url: string;\r\n}\r\nexport function DecoBackground(props: DecoBackgroundProps){\r\n  return (\r\n    <DecoBackgroundDiv>\r\n      <DecoImg src={props.img_url} alt='deco_pic'/>\r\n    </DecoBackgroundDiv>\r\n  );\r\n}\r\n\r\nconst DecoBackgroundDiv = styled.div`\r\n  background: linear-gradient(45deg, var(--maincolor2), var(--maincolor1));\r\n  box-shadow: 50px 50px 70px 50px var(--shadowcolor);\r\n`;\r\n\r\nconst DecoImg = styled.img`\r\n  object-fit: cover;\r\n`","import {default as ICON_MAP} from '../datastore/app_icon_map.json';\r\nimport {default as WEATHER_ICON_MAP} from '../datastore/weather_icon_map.json';\r\nimport {default as WEATHER_PIC_MAP} from '../datastore/weather_pic_map.json';\r\nimport { Loader } from './Loader';\r\nimport { BigIcon, Big3DIcon } from './IconElements';\r\nimport { DecoBackground } from './DecoBackground';\r\n\r\ntype ConstructorMap = {\r\n  [Property in Status]: (...args: any) => JSX.Element\r\n}\r\n\r\ninterface WeatherDisplayElementProps {\r\n  code: string,\r\n  is_night: boolean\r\n}\r\n/**\r\n * used in week weather for each status.\r\n * @param args WeatherDisplayElementProps, contains following keys:\r\n * - code: string, a code represents current weather.\r\n * - is_night: boolean: there are day and night version icon.\r\n */\r\nexport const WeatherDisplayReducer: ConstructorMap = {\r\n  init: ((args: WeatherDisplayElementProps) => \r\n    <BigIcon className={ICON_MAP.empty}/>\r\n  ),\r\n  loading: ((args: WeatherDisplayElementProps) => \r\n    <Loader/>\r\n  ),\r\n  failed: ((args: WeatherDisplayElementProps) => \r\n    <BigIcon className={ICON_MAP.failed}/>\r\n  ),\r\n  success: ((args: WeatherDisplayElementProps) => \r\n    <BigIcon className={getWeatherIconClsName(args)}/>\r\n  )\r\n}\r\n\r\n/**\r\n * used in 3day weather for each status.\r\n * @param args WeatherDisplayElementProps, contains following keys:\r\n * - code: string, a code represents current weather.\r\n * - is_night: boolean: there are day and night version icon.\r\n */\r\nexport const SpecialWeatherDisplayReducer: ConstructorMap = {\r\n  init: ((args: WeatherDisplayElementProps) => \r\n    <Big3DIcon className={ICON_MAP.empty}/>\r\n  ),\r\n  loading: ((args: WeatherDisplayElementProps) => \r\n    <Loader radius={2}/>\r\n  ),\r\n  failed: ((args: WeatherDisplayElementProps) => \r\n    <Big3DIcon className={ICON_MAP.failed}/>\r\n  ),\r\n  success: ((args: WeatherDisplayElementProps) => \r\n    <Big3DIcon className={getWeatherIconClsName(args)}/>\r\n  )\r\n}\r\n\r\n\r\n/**\r\n * used in 3day weather for each status.\r\n * @param args WeatherDisplayElementProps, contains following keys:\r\n * - code: string, a code represents current weather.\r\n * - is_night: boolean: there are day and night version icon.\r\n */\r\n export const WeatherPicReducer: ConstructorMap = {\r\n  init: ((args: WeatherDisplayElementProps) => \r\n    <DecoBackground\r\n      img_url={getWeatherPicUrl()}\r\n    />\r\n  ),\r\n  loading: ((args: WeatherDisplayElementProps) => \r\n    <DecoBackground\r\n      img_url={getWeatherPicUrl()}\r\n    />\r\n  ),\r\n  failed: ((args: WeatherDisplayElementProps) => \r\n    <DecoBackground\r\n      img_url={getWeatherPicUrl()}\r\n    />\r\n  ),\r\n  success: ((args: WeatherDisplayElementProps) => \r\n    <DecoBackground\r\n      img_url={getWeatherPicUrl(args)}\r\n    />\r\n  )\r\n}\r\n\r\nconst defaultWeatherArgs: WeatherDisplayElementProps = {\r\n  code: '00',\r\n  is_night: false\r\n};\r\n\r\n/**\r\n * @param args, contains following keys\r\n * - code : string represents weather\r\n * - is_night: bool, there are day and night version\r\n */\r\nfunction getWeatherIconClsName(args: WeatherDisplayElementProps = defaultWeatherArgs): string {\r\n  let icons = WEATHER_ICON_MAP[args.code as keyof typeof WEATHER_ICON_MAP];\r\n  \r\n  // not find weather\r\n  if (! icons){\r\n    icons = WEATHER_ICON_MAP[\"00\"];\r\n  }\r\n  return args.is_night ? icons.night: icons.day;\r\n}\r\n\r\n/**\r\n * put images in public url so that it can imports.\r\n * otherwise it might failed.\r\n * @param args, contains following keys\r\n * - code : string represents weather\r\n * - is_night: bool, there are day and night version\r\n */\r\nfunction getWeatherPicUrl(args: WeatherDisplayElementProps = defaultWeatherArgs): string {\r\n  // weather: string of relevant weather description\r\n  // is_night: bool\r\n  let pics = WEATHER_PIC_MAP[args.code as keyof typeof WEATHER_PIC_MAP];\r\n  \r\n  // not find weather\r\n  if (! pics){\r\n    pics = WEATHER_PIC_MAP[\"00\"];\r\n  }\r\n  return `WeatherPics/${args.is_night ? pics.night: pics.day}.jpg`;\r\n}","import styled, {css} from 'styled-components';\r\nimport {\r\n  ShadowCss, BigRoundCss,\r\n  RowDiv, ColDiv, GridDiv\r\n} from './appStyleWrappers';\r\n\r\n// use muti-layer css (ex GeneralCardCss) in template might cause error\r\n// avoid doing that.\r\nexport const VerticalFlexRoundCard = styled(ColDiv)((props: ContainerProps) => GeneralCardCss)\r\n\r\nexport const BigGridRoundCard = styled(GridDiv)((props: ContainerProps) => GeneralCardCss)\r\n\r\nexport const LeftBorderCard = styled(RowDiv)((props: ContainerProps) => `\r\n  padding: var(--gap2);\r\n  &:hover {\r\n    cursor: pointer;\r\n    background: var(--assistcolor);\r\n  }\r\n  &:before {\r\n    content: \"\";\r\n    width: var(--gap2);\r\n    height: calc(100% + var(--gap2) + var(--gap2));\r\n    transform: translateX(calc(0px - var(--gap2)));\r\n    background: var(--maincolor1);\r\n  }\r\n  &:hover:before {\r\n    background: linear-gradient(var(--maincolor1) 50%, var(--maincolor2) 50%);\r\n    background-size: 200% 200%;\r\n    animation: 1s ease 0s 1 normal forwards running FillAnime;\r\n  }\r\n`)\r\n\r\nconst GeneralCardCss = css`\r\n  ${BigRoundCss}\r\n  ${ShadowCss} \r\n  backdrop-filter: blur(var(--gap1));\r\n  background: var(--bgcolor_trans);\r\n`;","// import order: https://github.com/import-js/eslint-plugin-import/blob/main/docs/rules/order.md\r\nimport styled from 'styled-components';\r\nimport {\r\n  CircleSideCss, CircleCss, RowDiv, ColDiv, ShadowCss,\r\n  getHorizonalFlexCss\r\n} from './appStyleWrappers';\r\nimport { SmallIcon } from './IconElements';;\r\n\r\ninterface ButtonElementProps {\r\n  is_primary?: boolean,\r\n  is_disabled?: boolean\r\n}\r\n\r\ninterface ButtonProps extends ButtonElementProps{\r\n  func: React.MouseEventHandler\r\n}\r\n\r\ninterface CircleSideButtonProps extends ButtonProps {\r\n  content: JSX.Element | string\r\n}\r\n/**\r\n * @param props\r\n * - cls_name: string of additional classname\r\n * - func: export function that to display when cliking it\r\n * - is_disabled, is_primary: bool indicates the status of the button\r\n */\r\nexport function CircleSideButton(props: CircleSideButtonProps){\r\n  return (\r\n    <CircleSideBtn\r\n      disabled={props.is_disabled}\r\n      is_primary={props.is_primary}\r\n      onClick={props.func}\r\n    >\r\n      <RowDiv>{props.content}</RowDiv>\r\n    </CircleSideBtn>\r\n  );\r\n}\r\n\r\ninterface IconButtonProps extends ButtonProps {\r\n  icon_cls_name: string\r\n}\r\n/**\r\n * @param props\r\n * - cls_name: string of additional classname\r\n * - icon_cls_name: string, bootstrap classname\r\n * - func: export function that to display when cliking it\r\n * - is_disabled, is_primary: bool indicates the status of the button\r\n */\r\nexport function IconCircleButton(props: IconButtonProps){\r\n  return (\r\n    <CircleBtn\r\n      disabled={props.is_disabled}\r\n      is_primary={props.is_primary}\r\n      onClick={props.func}\r\n    >\r\n      <SmallIcon className={props.icon_cls_name} />\r\n    </CircleBtn>\r\n  );\r\n}\r\n\r\ninterface IconTitledButtonProps extends IconButtonProps {\r\n  content: JSX.Element | string\r\n}\r\n/**\r\n * @param props\r\n * - cls_name: string of additional classname\r\n * - icon_cls_name: string, bootstrap classname\r\n * - func: export function that to display when cliking it\r\n * - is_disabled, is_primary: bool indicates the status of the button\r\n * - content: string as the button description\r\n */\r\nexport function IconTitledButton(props: IconTitledButtonProps){\r\n  return (\r\n    <CircleSideBtn\r\n      disabled={props.is_disabled}\r\n      is_primary={props.is_primary}\r\n      onClick={props.func}\r\n    >\r\n      <SmallIcon className={props.icon_cls_name}/>\r\n      <ColDiv>{props.content}</ColDiv>\r\n    </CircleSideBtn>\r\n  );\r\n}\r\n\r\nconst HoverEffect = `\r\n  &:hover {\r\n    cursor: pointer;\r\n    background: linear-gradient(var(--bgcolor) 50%, var(--maincolor2) 50%);\r\n    background-size: 200% 200%;\r\n    animation: 1s ease 0s 1 normal forwards running FillAnime;\r\n  }\r\n`;\r\nconst Btn = styled.button((props: ButtonElementProps)=> `\r\n  ${getHorizonalFlexCss()}\r\n  background: var(--${props.is_primary? 'maincolor1': 'bgcolor'});\r\n  border: none;\r\n  transition-duration: 2s;\r\n  ${HoverEffect}\r\n  &:disabled {\r\n    opacity: 0.5;\r\n  }\r\n  &:disabled:hover {\r\n    cursor: not-allowed;\r\n    background: var(--bgcolor);\r\n  }\r\n`)\r\nconst CircleSideBtn = styled(Btn)`\r\n  ${CircleSideCss}\r\n`;\r\nconst CircleBtn = styled(Btn)`\r\n  ${CircleCss}\r\n  ${ShadowCss}\r\n  flex-grow: unset;\r\n  transform: scale(1.25);\r\n`;","import { RefObject } from 'react';\r\n\r\n/**\r\n * @param ref_obj: RefObject<HTMLDivElement>\r\n * make an flip and fade in effect\r\n */\r\nfunction fadeInEffect(ref_obj: RefObject<HTMLDivElement>){\r\n  const effect_func = (elapsed: number) => {\r\n    if (! ref_obj.current){\r\n      return;\r\n    }\r\n    ref_obj.current.style.opacity = `${elapsed}%`;\r\n    ref_obj.current.style.transform = `rotateY(${elapsed * 3.6}deg)`;\r\n  }\r\n  makeAnimate(effect_func);\r\n}\r\n/**\r\n * @param ref_obj: RefObject<HTMLDivElement>\r\n */\r\nfunction showContentEffect(ref_obj: RefObject<HTMLDivElement>){\r\n  const effect_func = (elapsed: number) => {\r\n    if (! ref_obj.current){\r\n      return;\r\n    }\r\n    ref_obj.current.style.clipPath = GetClipPath(elapsed);\r\n  }\r\n  makeAnimate(effect_func);\r\n}\r\n/**\r\n * @param ref_obj: RefObject<HTMLDivElement>\r\n */\r\nfunction hideContentEffect(ref_obj: RefObject<HTMLDivElement>){\r\n  const effect_func = (elapsed: number) => {\r\n    if (! ref_obj.current){\r\n      return;\r\n    }\r\n    const delta = 100 - elapsed;\r\n    ref_obj.current.style.clipPath = GetClipPath(delta);\r\n  }\r\n  makeAnimate(effect_func);\r\n}\r\n\r\n/**\r\n * use window.requestAnimationFrame to make effect\r\n * @param effect_func (t: number)=> void,\r\n * a function that accepts timestamp as args to make effect on react refobject.\r\n */\r\nfunction makeAnimate(effect_func: (t: number)=> void){\r\n  let elapsed: number = 0;\r\n  function makeEffect(timestamp: number){\r\n    effect_func(elapsed);\r\n    if (elapsed < 95){\r\n      elapsed += 5;\r\n      window.requestAnimationFrame(makeEffect);\r\n    }\r\n    else {\r\n      // end situation\r\n      effect_func(100);\r\n      elapsed = 0;\r\n    }\r\n  }\r\n  window.requestAnimationFrame(makeEffect);\r\n}\r\n\r\n/**\r\n * @param d time delta\r\n * @return a string of css clip path\r\n */\r\n function GetClipPath(d: number){\r\n  return d === 100 ? 'none': `ellipse(${d}% ${d}% at 50% 0%)`;\r\n}\r\n\r\nexport {fadeInEffect, showContentEffect, hideContentEffect}","import { \r\n  useRef,\r\n  ReactNode\r\n} from 'react';\r\nimport {IconCircleButton} from './ButtonComponent';\r\nimport { GridDiv, RowInGridDiv } from './appStyleWrappers';\r\nimport { fadeInEffect } from '../libs/componentEffects';\r\nimport {default as ICON_MAP} from '../datastore/app_icon_map.json';\r\n\r\ninterface SlideShowProps {\r\n  children: ReactNode,\r\n  max_page: number,\r\n  page: number,\r\n  setPage: React.Dispatch<React.SetStateAction<number>>\r\n}\r\n/**\r\n * @param props \r\n * - max_page: number, the max page of content;\r\n * - page: number of current page.\r\n * - setPage: React.Dispatch<React.SetStateAction<number>> to control page.\r\n * - children: ReactNode.\r\n */\r\nexport default function SlideShowWrapper(props: SlideShowProps){\r\n  const ref_for_effect = useRef<HTMLDivElement>(null); \r\n\r\n  const changePage = (change_amount: number) => {\r\n    const new_page = props.page + change_amount;\r\n    if (new_page < 0 || new_page === props.max_page){\r\n      return;\r\n    }\r\n    setTimeout(()=> {\r\n      props.setPage(new_page);\r\n    }, 20);\r\n    fadeInEffect(ref_for_effect);\r\n  }\r\n  const nextPage = () => {\r\n    changePage(1);\r\n  }\r\n  const prePage = () => {\r\n    changePage(-1);\r\n  }\r\n  return (\r\n    <GridDiv\r\n      col='var(--iconradius) 1fr var(--iconradius)'\r\n    >\r\n      <RowInGridDiv\r\n        ref={ref_for_effect}\r\n        alignItems='stretch'\r\n        gridArea='1/ 2/ 1/ 2'\r\n      >\r\n        {props.children}\r\n      </RowInGridDiv>\r\n      <RowInGridDiv\r\n        justifyContent='space-between'\r\n        gridArea='1/ 1/ 1/ 4'\r\n      >\r\n        <IconCircleButton\r\n          icon_cls_name={ICON_MAP.prev_page}\r\n          is_disabled={props.page === 0}\r\n          func={prePage}\r\n        />\r\n        <IconCircleButton\r\n          icon_cls_name={ICON_MAP.next_page}\r\n          is_disabled={props.page === props.max_page}\r\n          func={nextPage}\r\n        />\r\n      </RowInGridDiv>\r\n    </GridDiv>\r\n  );\r\n}","import { useState, useEffect } from 'react';\r\n\r\nimport { RowDiv } from '../components/appStyleWrappers';\r\nimport {IconLabeledElement} from '../components/IconElements';\r\nimport { \r\n  SpecialWeatherDisplayReducer, \r\n  WeatherPicReducer\r\n} from '../components/StateComponents';\r\nimport {VerticalFlexRoundCard} from '../components/Card';\r\nimport SlideShowWrapper from '../components/SlideShowWrapper';\r\nimport {default as ICON_MAP} from '../datastore/app_icon_map.json'\r\nimport {default as CONTENT_MAP} from '../datastore/app_content_map.json';\r\n\r\ninterface Weather3DaySectionProps {\r\n  state: Weather3DayState\r\n}\r\n\r\nexport default function Weather3DaySection(props: Weather3DaySectionProps){\r\n  const [page, setPage] = useState<number>(0);\r\n\r\n  // be very careful, the page would stay the same in re-rendering\r\n  // and will cause an error if not changing manually.\r\n  useEffect(()=> {\r\n    if (page >= props.state.data.length){\r\n      setPage(0);\r\n    }\r\n  }, [props.state.data, page]);\r\n\r\n  // the update above might be slower than rendering\r\n  // thus we need a constant to ensure.\r\n  const p = Math.min(page, props.state.data.length - 1);\r\n\r\n  return (\r\n    <section id=\"weather_3day\">\r\n      <div id=\"weather_3day_pic\">\r\n        <Weather3DayPic\r\n          status={props.state.status}\r\n          item_info={props.state.data[p]}\r\n        />\r\n      </div>\r\n      <SlideShowWrapper\r\n        max_page={props.state.data.length - 1}\r\n        page={p}\r\n        setPage={setPage}\r\n      >\r\n        <Weather3DayCard\r\n          status={props.state.status}\r\n          item_info={props.state.data[p]}\r\n        />\r\n      </SlideShowWrapper>\r\n    </section>\r\n  );\r\n}\r\n\r\ninterface Weather3DayItemProps {\r\n  status: Status,\r\n  item_info: Weather3DayItemInfo\r\n}\r\nfunction Weather3DayCard(props: Weather3DayItemProps){\r\n  return (\r\n    <VerticalFlexRoundCard>\r\n      <RowDiv>{props.item_info.duration || CONTENT_MAP.weather_3day}</RowDiv>\r\n      <RowDiv>\r\n        {SpecialWeatherDisplayReducer[props.status]({\r\n          code: props.item_info.code,\r\n          is_night: props.item_info.is_night\r\n        })}\r\n      </RowDiv>\r\n      <RowDiv>{props.item_info.weather}</RowDiv>\r\n      <RowDiv>\r\n        <h1>{`${props.item_info.temperature} ${CONTENT_MAP.temperature_unit}`}</h1>\r\n        {props.item_info.feel}\r\n      </RowDiv>\r\n      <RowDiv>\r\n        {['RH', 'POP'].map((title, i)=>(\r\n          <IconLabeledElement\r\n            icon_cls_name={ICON_MAP[title as keyof typeof ICON_MAP]}\r\n            content={`${props.item_info[title as keyof Weather3DayItemInfo]}`}\r\n            key={`labeled-${i}`}\r\n          />\r\n        ))}\r\n      </RowDiv>\r\n    </VerticalFlexRoundCard>\r\n  );\r\n}\r\n\r\nfunction Weather3DayPic(props: Weather3DayItemProps){\r\n  return (\r\n    WeatherPicReducer[props.status]({\r\n      code: props.item_info.code,\r\n      is_night: props.item_info.is_night\r\n    })\r\n  );\r\n}","import styled from 'styled-components';\r\nimport { GridDiv, SmallRoundCss } from './appStyleWrappers';\r\nimport { \r\n  getXCoords, getListOfYCoords, getListOfYLabels\r\n} from '../libs/chartHelpers';\r\n\r\ninterface ChartComponentProps {\r\n  x_labels: Array<string>,\r\n  data: {\r\n    vals_lists: Array<Array<number>>,\r\n    unit_list: Array<string>\r\n  }\r\n}\r\n/**\r\n * @param props contains following keys:\r\n * - x_labels: array of labels on x-axis\r\n * - data: object which contains following keys:\r\n *    * vals_lists: Array<Array<number>>, each dataset(val_list) \r\n *      has same (or larger) length as x_labels.\r\n *    * unit_list: Array<string>, unit for each dataset.\r\n */\r\nexport default function ChartComponent(props: ChartComponentProps){\r\n  const x_coords = getXCoords(props.x_labels.length);\r\n  const y_coords_list = getListOfYCoords(props.data.vals_lists);\r\n  const y_labels_list = getListOfYLabels(props.data);\r\n  \r\n  return (\r\n  <ChartContainer\r\n    row='1fr'\r\n    col='1fr'\r\n    alignItems='stretch'\r\n    justifyContent='stretch'\r\n  >\r\n    <ChartLabelComponent\r\n      x_labels={props.x_labels}\r\n      y_coords_list={y_coords_list}\r\n      y_labels_list={y_labels_list}\r\n    />\r\n    <ChartBody\r\n      x_coords={x_coords}\r\n      y_coords_list={y_coords_list}\r\n    />\r\n  </ChartContainer>\r\n  );\r\n}\r\n\r\ninterface ChartLabelComponentProps {\r\n  x_labels: Array<string>,\r\n  y_labels_list: Array<Array<string>>,\r\n  y_coords_list: Array<Array<number>>\r\n}\r\n\r\nfunction ChartLabelComponent(props: ChartLabelComponentProps){\r\n  return (\r\n    <ChartLabelContainer\r\n      col={`repeat(${props.x_labels.length}, 1fr)`}\r\n      alignItems='stretch'\r\n      justifyContent='stretch'\r\n    >\r\n      {props.x_labels.map((x_label, i)=>\r\n        <ChartLabelAtX\r\n          x_label={x_label}\r\n          y_labels={props.y_labels_list.map(y_labels => y_labels[i])}\r\n          y_coords={props.y_coords_list.map(y_coords => y_coords[i])}\r\n          key={`label_x-${i}`}\r\n        />\r\n      )}\r\n    </ChartLabelContainer>\r\n  );\r\n}\r\n\r\ninterface ChartLabelAtXProps {\r\n  x_label: string,\r\n  y_labels: Array<string>,\r\n  y_coords: Array<number>\r\n}\r\nfunction ChartLabelAtX(props: ChartLabelAtXProps){\r\n  return (\r\n    <ColAtX\r\n      row=\"var(--fontsize_normal) 1fr\"\r\n      alignItems=\"start\"\r\n    >\r\n      {props.x_label}\r\n      {props.y_labels.map((label, i)=>\r\n        <ChartLabel\r\n          top={props.y_coords[i]}\r\n          key={`label-${i}`}\r\n        >\r\n          {label}\r\n        </ChartLabel>\r\n      )}\r\n    </ColAtX>\r\n  );\r\n}\r\n\r\ninterface ChartBodyProps {\r\n  x_coords: Array<number>\r\n  y_coords_list: Array<Array<number>>\r\n}\r\nfunction ChartBody(props: ChartBodyProps){\r\n  return (\r\n    <MySvg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n    >\r\n      {props.y_coords_list.map((y_coords, i)=>\r\n        <LineGroup\r\n          x_coords={props.x_coords}\r\n          y_coords={y_coords}\r\n          key={`linegroup-${i}`}\r\n        />\r\n      )}\r\n    </MySvg>\r\n  );\r\n}\r\n\r\ninterface LineGroupProps {\r\n  x_coords: Array<number>,\r\n  y_coords: Array<number>\r\n}\r\n/**\r\n * @param props x_coords, y_coords;\r\n * coords for x/ y axises, x_coords.length === y_coords.length\r\n */\r\nfunction LineGroup(props: LineGroupProps){\r\n  if (props.x_coords.length > props.y_coords.length){\r\n    return <g/>;\r\n  }\r\n  const Lines = [];\r\n  let prevX = props.x_coords[0];\r\n  let prevY = props.y_coords[0];\r\n  for (let i = 0; i < props.x_coords.length; i ++){\r\n    Lines.push(\r\n      <LineAndMarker\r\n        x1={prevX}\r\n        y1={prevY}\r\n        x2={props.x_coords[i]}\r\n        y2={props.y_coords[i]}\r\n        key={`line-${i}`}\r\n      />\r\n    );\r\n    prevX = props.x_coords[i];\r\n    prevY = props.y_coords[i];\r\n  }\r\n  return (\r\n    <MyLineGroup>\r\n      {Lines}\r\n      <animateTransform \r\n        attributeName=\"transform\"\r\n        attributeType=\"XML\"\r\n        type=\"scale\"\r\n        from=\"1 0\"\r\n        to=\"1 1\"\r\n        begin=\"1s\"\r\n        dur=\"3s\"\r\n        repeatCount=\"0\"/>\r\n    </MyLineGroup>\r\n  );\r\n}\r\n\r\ninterface LineAndMarkerProps {\r\n  x1: number,\r\n  x2: number,\r\n  y1: number,\r\n  y2: number\r\n}\r\nfunction LineAndMarker(props: LineAndMarkerProps){\r\n  return (\r\n    <>\r\n      <MyLine\r\n        x1={`${props.x1}%`} y1={`${props.y1}%`} \r\n        x2={`${props.x2}%`}  y2={`${props.y2}%`} \r\n      />\r\n      <MyCircle\r\n        cx={`${props.x2}%`} cy={`${props.y2}%`} \r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nconst ChartContainer = styled(GridDiv)`\r\n  ${SmallRoundCss}\r\n  backdrop-filter: blur( 1px ) brightness(0.75);\r\n  height: 100%;\r\n`;\r\n\r\nconst ColAtX = styled(GridDiv)`\r\n  width: min-content;\r\n  &:hover {\r\n    background: var(--assistcolor);\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst ChartLabelContainer = styled(GridDiv)`\r\n  grid-area: 1/1/1/1;\r\n  font-size: var(--fontsize_small);\r\n  text-align: center;\r\n`;\r\n\r\ninterface ChartLabelProps {\r\n  top: number\r\n}\r\nconst ChartLabel = styled.div((props: ChartLabelProps)=> `\r\n  position: relative;\r\n  top: ${props.top}%;\r\n  grid-area: 2/1/2/1;\r\n  filter: opacity(0);\r\n  transform: translateY(var(--fontsize_small));\r\n  height: fit-content;\r\n  ${ColAtX}:hover & {\r\n    filter: opacity(1);\r\n  }\r\n`);\r\n\r\nconst MySvg = styled.svg`\r\n  grid-area: 1/1/1/1;\r\n  width: 100%;\r\n  margin-top: calc(var(--fontsize_normal) + var(--fontsize_normal));\r\n  height: calc(100% - var(--fontsize_normal) - var(--fontsize_normal));\r\n`;\r\n\r\nconst MyLineGroup = styled.g`\r\n  transform-origin: center;\r\n  filter: drop-shadow(1px 1px 2px var(--maincolor2)) brightness(1.1);\r\n`;\r\n\r\nconst MyLine = styled.line`\r\n  fill: var(--bgcolor);\r\n  stroke: var(--bgcolor);\r\n  stroke-linecap: round;\r\n  stroke-width: 5;\r\n`;\r\n\r\nconst MyCircle = styled.circle`\r\n  fill: var(--bgcolor);\r\n  stroke: var(--bgcolor);\r\n  stroke-linecap: round;\r\n  r: 5;\r\n`;","/**\r\n * @returns Array<number> which can split x-axis evenly into split_number-th parts.\r\n */\r\nexport function getXCoords(split_number: number){\r\n  const x_unit = 100 / split_number;\r\n  const x_coords = [x_unit * 0.5];\r\n  for (let i = 1; i < split_number; i++){\r\n    x_coords.push(x_coords[i - 1] + x_unit);\r\n  }\r\n  return x_coords;\r\n}\r\n\r\n/**\r\n * @param val_lists: Array<Array<number>>: a mutiple set of data vals.\r\n * @returns Array<Array<number>> which turn vals of each set into y_coords.\r\n */\r\nexport function getListOfYCoords(val_lists: Array<Array<number>>){\r\n\r\n  // calculate the range in y axis\r\n  const y_coords = val_lists.flat();\r\n  const minY = Math.min(...y_coords);\r\n  const maxY = Math.max(...y_coords);\r\n\r\n  // all val lists are empty\r\n  if (minY > maxY){\r\n    return [];\r\n  }\r\n  const getYPos: (val: number)=> number = getYposFunctionBuilder(minY, maxY);\r\n  return val_lists.map(vals => \r\n    vals.map(val => getYPos(val))\r\n  );\r\n}\r\n\r\ninterface GetListOfYLabelsArgs {\r\n  vals_lists: Array<Array<number>>,\r\n  unit_list: Array<string>\r\n}\r\n/**\r\n * @param kwargs: contains following keys:\r\n * - vals_lists: Array<Array<number>>: a mutiple set of data vals.\r\n * - unit_list: Array<string>: a list of units for vals above.\r\n * @returns Array<Array<string>> which turn vals of each set into y_labels.\r\n */\r\nexport function getListOfYLabels(kwargs: GetListOfYLabelsArgs){\r\n  return kwargs.vals_lists.map((vals, i) => \r\n    vals.map(val => `${val} ${kwargs.unit_list[i]}`)\r\n  );\r\n}\r\n\r\n/**\r\n * @returns (val: number)=> number, a function helps decide y pos by range of y data.\r\n */\r\nfunction getYposFunctionBuilder(minY: number, maxY: number) {\r\n  // a horinzonal line\r\n  if (maxY === minY){\r\n    return ((val: number)=> 50);\r\n  }\r\n  return ((val: number)=> 10 + 80 * (1 - (val - minY) / (maxY - minY)));\r\n}","import { VerticalFlexRoundCard } from '../components/Card';\r\nimport ChartComponent from '../components/ChartComponent';\r\nimport {default as CONTENT_MAP} from '../datastore/app_content_map.json';\r\n\r\ninterface WeatherWeekSectionProps {\r\n  display_week: Array<string>,\r\n  state: WeatherWeekState\r\n}\r\nexport default function WeatherWeekSection(props: WeatherWeekSectionProps){\r\n  return (\r\n    <VerticalFlexRoundCard\r\n      id=\"weather_week\"\r\n    >\r\n      {CONTENT_MAP.weather_week}\r\n      <ChartComponent\r\n        x_labels={props.display_week}\r\n        data={{\r\n          vals_lists: [\r\n            props.state.data.temperature.maxT,\r\n            props.state.data.temperature.minT\r\n          ],\r\n          unit_list: [\r\n            CONTENT_MAP.temperature_unit,\r\n            CONTENT_MAP.temperature_unit\r\n          ]\r\n        }}\r\n      />\r\n    </VerticalFlexRoundCard>\r\n  );\r\n}","import { ColDiv, CenterTitle } from '../components/appStyleWrappers';\r\nimport { LeftBorderCard, BigGridRoundCard } from '../components/Card';\r\nimport { IconLabeledElement } from '../components/IconElements';\r\nimport { WeatherDisplayReducer } from '../components/StateComponents';\r\n\r\nimport {default as ICON_MAP} from '../datastore/app_icon_map.json'\r\n\r\ninterface ScheduleSectionProps {\r\n  weatherState: WeatherWeekState,\r\n  calendarState: CalendarState,\r\n  display_week: Array<string>\r\n}\r\n\r\nexport default function ScheduleSection(props: ScheduleSectionProps){\r\n  return (\r\n    <>\r\n      {props.display_week.map((day, i)=>\r\n        <BigGridRoundCard\r\n          col='20% 1fr'\r\n          alignItems='stretch'\r\n          key={`schedule_of_day-${i}`}\r\n        >\r\n          <ColDiv>\r\n            <CenterTitle>{day}</CenterTitle>\r\n            <WeatherOfDay\r\n              status={props.weatherState.status}\r\n              item_info={props.weatherState.data.weather_list[i]}\r\n            />\r\n          </ColDiv>\r\n          <EventOfDay\r\n            event_list={props.calendarState.data.event_list[i]}\r\n          />\r\n        </BigGridRoundCard>\r\n      )}\r\n    </>\r\n  );\r\n}\r\ninterface WeatherOfDayProps {\r\n  status: Status,\r\n  item_info: WeatherWeekItemInfo\r\n}\r\nfunction WeatherOfDay(props: WeatherOfDayProps){\r\n  return (\r\n    <ColDiv>\r\n      {['day', 'night'].map((k, i)=>\r\n        <ColDiv key={`weather_of_day-${i}`}>\r\n          {WeatherDisplayReducer[props.status]({\r\n            code: props.item_info[k as keyof WeatherWeekItemInfo].code,\r\n            is_night: k === 'night'\r\n          })}\r\n          {props.item_info[k as keyof WeatherWeekItemInfo].POP}\r\n        </ColDiv>\r\n      )}\r\n    </ColDiv>\r\n  );\r\n}\r\n\r\ninterface EventOfDayProps {\r\n  event_list: Array<EventInfo>\r\n}\r\nfunction EventOfDay(props: EventOfDayProps){\r\n  return (\r\n    <ColDiv\r\n      alignItems='stretch'\r\n    >\r\n      {props.event_list.map((event_info, i)=>\r\n        <SingleEvent\r\n          event_info={event_info}\r\n          key={`day_event-${i}`}\r\n        />\r\n      )}\r\n    </ColDiv>\r\n  );\r\n}\r\n\r\ninterface SingleEventProps {\r\n  event_info: EventInfo\r\n}\r\nfunction SingleEvent(props: SingleEventProps){\r\n  const ViewOnCalendar = () => {\r\n    if (props.event_info.link === ''){\r\n      return;\r\n    }\r\n    window.open(props.event_info.link, \"_blank\");\r\n  }\r\n  return (\r\n    <LeftBorderCard\r\n      onClick={ViewOnCalendar}\r\n    >\r\n      <ColDiv\r\n        alignItems=\"stretch\"\r\n      >\r\n        <h1>{props.event_info.summary}</h1>\r\n        {['duration', 'location'].map((title, i)=>\r\n          <IconLabeledElement\r\n            icon_cls_name={ICON_MAP[title as keyof typeof ICON_MAP]}\r\n            content={props.event_info[title as keyof EventInfo]}\r\n            key={`single_event-${i}`}\r\n          />\r\n        )}\r\n      </ColDiv>\r\n    </LeftBorderCard>\r\n  );\r\n}\r\n","import {\r\n  useState, useRef, MutableRefObject, \r\n  MouseEvent, MouseEventHandler\r\n} from 'react';\r\nimport styled from 'styled-components';\r\nimport {showContentEffect, hideContentEffect} from '../libs/componentEffects';\r\n\r\ninterface SwitchShowController {\r\n  is_hide: boolean,\r\n  switchDisplay: MouseEventHandler,\r\n  stopEvent: MouseEventHandler,\r\n  ref_content: MutableRefObject<null>\r\n}\r\n\r\n/**\r\n * @return SwitchShowController, a object contains following key:\r\n * - is_hide: boolean, the display status of main content, init is true.\r\n * - switchDisplay: MouseEventHandler to controll the visibility of main content.\r\n * - stopEvent: MouseEventHandler to avoid switching display status.\r\n * - ref_content: MutableRefObject<null>, as the ref for the main content.\r\n */\r\nexport function DisplayController(): SwitchShowController {\r\n  const [is_hide, setHide] = useState<boolean>(true);\r\n  const ref_content = useRef(null);\r\n  const switchDisplay = (event: MouseEvent) => {\r\n    stopEvent(event);\r\n    if (is_hide){\r\n      setHide(false);\r\n      showContentEffect(ref_content);\r\n      return;\r\n    }\r\n    hideContentEffect(ref_content);\r\n    setTimeout(()=>{ setHide(true);}, 501);\r\n  }\r\n\r\n  const stopEvent = (event: React.MouseEvent) => {\r\n    // possible to be nested, \r\n    // stop event bubbling / capturing to avoid close all content\r\n    event.preventDefault()\r\n    event.stopPropagation();\r\n    event.nativeEvent.stopImmediatePropagation();\r\n  }\r\n  return {\r\n    is_hide,\r\n    ref_content,\r\n    switchDisplay,\r\n    stopEvent\r\n  };\r\n}\r\n\r\ninterface DynamicContentContainerProps extends ContainerProps {\r\n  hidden: boolean\r\n}\r\n\r\nexport const DynamicContentContainer = styled.div((props: DynamicContentContainerProps)=>`\r\n  ${props.hidden ? '': 'display: contents;'}\r\n`);","import {ReactNode} from 'react';\r\nimport styled from 'styled-components';\r\n\r\nimport { ColDiv } from './appStyleWrappers';\r\nimport { IconCircleButton } from './ButtonComponent';\r\nimport { \r\n  DisplayController,\r\n  DynamicContentContainer\r\n} from './SwitchShowElement';\r\n\r\n\r\ninterface MenuWrapperProps {\r\n  children: ReactNode,\r\n  icon_cls_name: string\r\n}\r\n/**\r\n * @param props includes following keys:\r\n * - content: JSX.Element | string, content to display in menu.\r\n * - icon_cls_name: bootstrap icon classname for switch button.\r\n */\r\nexport function MenuWrapper(props: MenuWrapperProps){\r\n  const {\r\n    is_hide,\r\n    ref_content,\r\n    switchDisplay,\r\n    stopEvent\r\n  } = DisplayController();\r\n\r\n  return (\r\n    <>\r\n      <IconCircleButton\r\n        is_primary={true}\r\n        icon_cls_name={props.icon_cls_name}\r\n        func={switchDisplay}\r\n      />\r\n      <DynamicContentContainer\r\n        hidden={is_hide}\r\n      >\r\n        <MenuBoard\r\n          ref={ref_content}\r\n          onClick={switchDisplay}\r\n        >\r\n          <ContentContainer\r\n            onClick={stopEvent}\r\n          >\r\n            {props.children}\r\n          </ContentContainer>\r\n        </MenuBoard>\r\n      </DynamicContentContainer>\r\n    </>\r\n  ); \r\n}\r\n\r\nconst MenuBoard = styled(ColDiv)`\r\n  background: var(--assistcolor);\r\n  backdrop-filter: blur(var(--gap1));\r\n  position: fixed;\r\n  top: 0px;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: -1;\r\n`\r\n\r\nconst ContentContainer = styled(ColDiv)`\r\n  max-width: 100vw;\r\n  max-height: 100vh;\r\n  overflow: auto;\r\n`","import {\r\n  useState, useRef, useEffect,\r\n  ChangeEvent,\r\n  MouseEvent, MouseEventHandler,\r\n  ReactNode\r\n} from 'react';\r\n\r\nimport styled, {css} from 'styled-components';\r\nimport {\r\n  CircleCss, CircleSideCss, SmallRoundCss, getVerticalFlexCss,\r\n  GridDiv, RowInGridDiv, RowDiv, ColDiv\r\n} from './appStyleWrappers';\r\nimport { SmallIcon } from './IconElements';\r\nimport { CircleSideButton, IconTitledButton } from './ButtonComponent';\r\nimport { \r\n  DisplayController,\r\n  DynamicContentContainer\r\n} from './SwitchShowElement';\r\n\r\nimport {default as ICON_MAP} from '../datastore/app_icon_map.json';\r\n\r\ninterface MyFormProps {\r\n  children: ReactNode,\r\n  question: string,\r\n  submit_func: MouseEventHandler,\r\n  cancel_func: MouseEventHandler\r\n}\r\nexport function MyForm(props: MyFormProps){\r\n  const {\r\n    is_hide,\r\n    ref_content,\r\n    switchDisplay,\r\n    stopEvent\r\n  } = DisplayController();\r\n\r\n  // if form data is needed for third parties, use following method in form's onSubmit:\r\n  // https://github.com/final-form/react-final-form/issues/878#issuecomment-745364350\r\n  const formRef= useRef<HTMLFormElement>(null);\r\n  const handleSubmit = (event: MouseEvent) => {\r\n    if (! formRef.current){\r\n      return;\r\n    }\r\n    if (formRef.current.reportValidity()){\r\n      props.submit_func(event);\r\n      switchDisplay(event);\r\n    }\r\n  }\r\n  const handleCancel = (event: MouseEvent) => {\r\n    props.cancel_func(event);\r\n    switchDisplay(event);\r\n  }\r\n\r\n  return (\r\n    <ColDiv flexGrow='unset'>\r\n      <CircleSideButton\r\n        content={props.question}\r\n        func={switchDisplay}\r\n      />\r\n      <DynamicContentContainer\r\n        hidden={is_hide}\r\n      >\r\n        <Board\r\n          ref={ref_content}\r\n          onClick={switchDisplay}\r\n        >\r\n          <MyFormWrapper\r\n            ref={formRef}\r\n            onClick={stopEvent}\r\n          >\r\n            {props.children}\r\n            <RowDiv>\r\n              <IconTitledButton\r\n                is_primary={true}\r\n                content=\"確認\"\r\n                icon_cls_name={ICON_MAP.checked}\r\n                func={handleSubmit}\r\n              />\r\n              <IconTitledButton\r\n                content=\"取消\"\r\n                icon_cls_name={ICON_MAP.canceled}\r\n                func={handleCancel}\r\n              />\r\n            </RowDiv>\r\n          </MyFormWrapper>\r\n        </Board>\r\n      </DynamicContentContainer>\r\n    </ColDiv>\r\n  );\r\n}\r\n\r\ninterface PasswordInputComponentProps {\r\n  label: string,\r\n  value: string,\r\n  setValue: (s: string) => any,\r\n  icon_cls_name: string\r\n}\r\nexport function PasswordInputComponent(props: PasswordInputComponentProps){\r\n  const [hidePassword, setHidePassword] = useState<boolean>(true);\r\n  const [msg, setMsg] = useState('');\r\n  const refInput = useRef<HTMLInputElement>(null);\r\n  const handleSwitch = () => {\r\n    setHidePassword(! hidePassword);\r\n  }\r\n  const handleChange = (event: ChangeEvent<HTMLInputElement>) => {\r\n    setMsg(event.target.validationMessage);\r\n    props.setValue(event.target.value);\r\n  }\r\n  useEffect(() => {\r\n    if (refInput.current?.validationMessage){\r\n      setMsg(refInput.current?.validationMessage);\r\n    }\r\n  }, [refInput]);\r\n\r\n  const [inputType, statusIcon] = hidePassword ? \r\n    ['password', ICON_MAP.password_is_hide]:\r\n    ['text', ICON_MAP.password_is_show]\r\n  ;\r\n  return (\r\n    <InputSection\r\n      label={props.label}\r\n    >\r\n      <i>{msg}</i>\r\n      <GridDiv>\r\n        <IconContainer\r\n          gridArea='1/1/1/1'\r\n          alignItems='stretch'\r\n          justifyContent='space-between'\r\n        >\r\n          <SmallIcon className={props.icon_cls_name}/>\r\n          <SmallIcon \r\n            className={statusIcon}\r\n            onClick={handleSwitch}\r\n          />\r\n        </IconContainer>\r\n        <RowInGridDiv\r\n          gridArea='1/1/1/1'\r\n          alignItems='stretch'\r\n        >\r\n          <MyInput\r\n            ref={refInput}\r\n            name={props.label}\r\n            value={props.value}\r\n            onChange={handleChange}\r\n            type={inputType}\r\n            required\r\n          />\r\n        </RowInGridDiv>\r\n      </GridDiv>\r\n    </InputSection>\r\n  );\r\n}\r\n\r\ninterface SelectComponentProps {\r\n  label: string,\r\n  option_list: Array<string>,\r\n  value: string,\r\n  setValue: (s: string) => any\r\n}\r\nexport function SelectInputComponent(props: SelectComponentProps){\r\n  return (\r\n    <InputSection\r\n      label={props.label}\r\n    >\r\n      <ColDiv\r\n        justifyContent='stretch'\r\n        alignItems='stretch'\r\n      >\r\n        <HiddenSelectElement\r\n          label={props.label}\r\n          value={props.value}\r\n          option_list={props.option_list}\r\n        />\r\n        <DummySelectElement\r\n          label={props.label}\r\n          value={props.value}\r\n          setValue={props.setValue}\r\n          option_list={props.option_list}\r\n        />\r\n      </ColDiv>\r\n    </InputSection>\r\n  ); \r\n}\r\n\r\ninterface ToggleCheckComponentProps {\r\n  label: string,\r\n  msg_checked: string,\r\n  value: boolean,\r\n  setValue: (bool: boolean) => any\r\n}\r\nexport function ToggleCheckComponent(props: ToggleCheckComponentProps){\r\n  // deal with old bugs of checkbox, radio button. \r\n  // https://github.com/facebook/react/issues/21094\r\n  const handleCheck = (event: ChangeEvent<HTMLInputElement>) => {\r\n    event.preventDefault();\r\n    setTimeout(() => props.setValue(! props.value), 0)\r\n  }\r\n  return (\r\n    <InputSection\r\n      label={props.label}\r\n    >\r\n      <RowDiv>\r\n        <MyCheckBox\r\n          name={props.label}\r\n          type='checkbox'\r\n          value={`${props.value}`}\r\n          checked={props.value}\r\n          onChange={handleCheck}\r\n        />\r\n        {props.msg_checked}\r\n      </RowDiv>\r\n    </InputSection>\r\n  );\r\n}\r\n\r\ninterface InputSectionProps {\r\n  children: ReactNode,\r\n  label: string\r\n}\r\nfunction InputSection(props: InputSectionProps){\r\n  return (\r\n    <MyFieldSet>\r\n      <label htmlFor={props.label}>\r\n        {props.label}\r\n      </label>\r\n        {props.children}\r\n    </MyFieldSet>\r\n  );\r\n}\r\n\r\ninterface HiddenSelectElementProps {\r\n  label: string,\r\n  value: string,\r\n  option_list: Array<string>\r\n}\r\nfunction HiddenSelectElement(props: HiddenSelectElementProps){\r\n  const [msg, setMsg] = useState('');\r\n  const refSelect = useRef<HTMLSelectElement>(null);\r\n\r\n  // unlike input element, here the value is not decided by itself.\r\n  // thus need to 'recover' the msg if value is changed and it's valid;\r\n  useEffect(() => {\r\n    if (! refSelect.current){\r\n      return;\r\n    }\r\n\r\n    refSelect.current.value = props.value;\r\n    if (refSelect.current.reportValidity()){\r\n      setMsg('');\r\n    }\r\n    else {\r\n      refSelect.current.focus();\r\n      setMsg(refSelect.current.validationMessage);\r\n    }\r\n  }, [props.value, refSelect]);\r\n\r\n  return (\r\n    <>\r\n    <i>{msg}</i>\r\n    <HiddenSelect\r\n      ref={refSelect}\r\n      name={props.label}\r\n      value={props.value}\r\n      onChange={()=> {}}\r\n      required={true}\r\n    >\r\n      <option value=''/>\r\n      {props.option_list.map((op, i)=>\r\n        <option value={op} key={`op-${i}`}>\r\n          {op}\r\n        </option>\r\n      )}\r\n    </HiddenSelect>\r\n    </>\r\n  );\r\n}\r\n\r\ninterface DummySelectElementProps {\r\n  label: string,\r\n  value: string,\r\n  setValue: (s: string) => any,\r\n  option_list: Array<string>\r\n}\r\nfunction DummySelectElement(props: DummySelectElementProps){\r\n  const {\r\n    is_hide,\r\n    ref_content,\r\n    switchDisplay,\r\n    stopEvent\r\n  } = DisplayController();\r\n\r\n  const selectItem = (op: string) => {\r\n    return (event: MouseEvent) => {\r\n      switchDisplay(event);\r\n      props.setValue(op);\r\n    }\r\n  }\r\n  return (\r\n    <>\r\n    <DummySelect\r\n      col='var(--iconradius) 1fr var(--iconradius)'\r\n      onClick={switchDisplay}\r\n    >\r\n      <i/>\r\n      {props.value || props.label}\r\n      <SmallIcon className={is_hide ? \r\n        ICON_MAP.extend_content:\r\n        ICON_MAP.fold_content\r\n      }/>\r\n    </DummySelect>\r\n     \r\n    <DynamicContentContainer\r\n      hidden={is_hide}\r\n    >\r\n      <ContentBoard\r\n        ref={ref_content}\r\n        onClick={switchDisplay}\r\n        justifyContent='start'\r\n        alignItems='stretch'\r\n      >\r\n        <GridDiv\r\n          row='auto'\r\n          col='repeat(3, 1fr)'\r\n          onClick={stopEvent}\r\n        >\r\n          {props.option_list.map((op, i)=>\r\n            <CircleSideButton\r\n              content={op}\r\n              func={selectItem(op)}\r\n              is_primary={op === props.value}\r\n              key={`option-${i}`}\r\n            />\r\n          )}\r\n        </GridDiv>\r\n      </ContentBoard>\r\n    </DynamicContentContainer>\r\n  </>\r\n  );\r\n}\r\n\r\nconst FormElementCSS = css`\r\n  background: var(--bgcolor);\r\n  box-shadow: 1px 1px 5px 0px var(--shadowcolor);\r\n`;\r\nconst MyFormWrapper = styled.form`\r\n  max-width: 100vw;\r\n  max-height: 100vh;\r\n  overflow: auto;\r\n`;\r\n\r\nconst MyInput = styled.input`\r\n  ${CircleSideCss}\r\n  ${FormElementCSS}\r\n  padding: 5px calc(var(--iconsize) + 5px);\r\n  display: flex;\r\n  flex-grow: 1;\r\n  border: none;\r\n  outline:none;\r\n  &:focus {\r\n    border: none;\r\n    outline:none;\r\n    background: var(--maincolor1);\r\n  }\r\n`; \r\nconst MyCheckBox = styled.input`\r\n  appearance: none;\r\n  cursor: pointer;\r\n  ${CircleSideCss}\r\n  ${FormElementCSS}\r\n  padding: 5px 0;\r\n  transition-duration: 2s;\r\n  &:checked {\r\n    background: var(--maincolor2);\r\n  }\r\n  &:before, &:after {\r\n    ${CircleCss}\r\n    position: relative;\r\n  }\r\n  &:after {\r\n    content: 'on';\r\n    margin-left: var(--gap1);\r\n  }\r\n  &:before {\r\n    content: 'off';\r\n  }\r\n  &:after, &:checked:before {\r\n    color: transparent;\r\n    background: var(--bgcolor);\r\n    border: 1px solid var(--shadowcolor);\r\n    box-shadow: 1px 1px 5px 0px var(--shadowcolor);\r\n  }\r\n  &:before, &:checked:after {\r\n    color: var(--fontcolor);\r\n    background: none;\r\n    border: none;\r\n    box-shadow: none;\r\n  }\r\n`; \r\nconst DummySelect = styled(GridDiv)`\r\n  ${CircleSideCss}\r\n  ${FormElementCSS}\r\n  cursor: pointer;\r\n  transition-duration: 2s;\r\n  &:hover {\r\n    background: var(--maincolor2);\r\n  }\r\n`;\r\nconst HiddenSelect = styled.select`\r\n  height: 0px;\r\n  width: 0px;\r\n  opacity: 0;\r\n`\r\nconst IconContainer = styled(RowInGridDiv)`\r\n  padding: var(--iconradius);\r\n`\r\nconst ContentBoard = styled(ColDiv)`\r\n  ${SmallRoundCss}\r\n  ${FormElementCSS}\r\n`\r\nconst Board = styled(ColDiv)`\r\n  background: var(--assistcolor);\r\n  backdrop-filter: blur(var(--gap3));\r\n  position: fixed;\r\n  top: 0px;\r\n  width: 100vw;\r\n  height: 100vh;\r\n  z-index: 1;\r\n  & > {\r\n    width: fit-content;\r\n  }\r\n`\r\nconst MyFieldSet = styled.fieldset`\r\n  ${getVerticalFlexCss()}\r\n  margin: var(--gap2) 0;\r\n  border: none;\r\n  &:invalid {\r\n    border-right: var(--gap1) solid var(--maincolor2);\r\n  }\r\n`;","import { useState } from \"react\";\r\nimport { MenuWrapper } from '../components/MenuWrapper';\r\nimport { \r\n  MyForm, \r\n  SelectInputComponent, \r\n  PasswordInputComponent, \r\n  ToggleCheckComponent\r\n} from \"../components/MyFormElements\";\r\n\r\nimport {default as CITY_MAP} from '../datastore/weather_city_map.json';\r\nimport {default as ICON_MAP} from '../datastore/app_icon_map.json';\r\nimport {default as CONTENT_MAP} from '../datastore/app_content_map.json';\r\n\r\ninterface SettingSectionProps {\r\n  weatherParam: WeatherParam | null,\r\n  setWeatherParam: React.Dispatch<React.SetStateAction<WeatherParam | null>>,\r\n  calendarParam: CalendarParam | null,\r\n  setCalendarParam: React.Dispatch<React.SetStateAction<CalendarParam | null>>,\r\n  cur_week: Array<Date>\r\n}\r\n/**\r\n * @param props SettingSectionProps \r\n * - cur_week: Array<Date>\r\n * for weather, calendar state, each contains following properties:\r\n * - param: param | null, null for init only, required info for fetching api.\r\n * - setParam: React.Dispatch<React.SetStateAction> to update param above.\r\n */\r\nexport default function SettingSection(props: SettingSectionProps){\r\n  return (\r\n    <MenuWrapper\r\n      icon_cls_name={ICON_MAP.setting}\r\n    >\r\n      <WeatherParamSetSection\r\n        weatherParam={props.weatherParam}\r\n        setWeatherParam={props.setWeatherParam}\r\n      />\r\n      <CalendarParamSetSection\r\n        calendarParam={props.calendarParam}\r\n        setCalendarParam={props.setCalendarParam}\r\n        cur_week={props.cur_week}\r\n      />\r\n    </MenuWrapper>\r\n  );\r\n}\r\n\r\ninterface WeatherParamSetSectionProps {\r\n  weatherParam: WeatherParam | null\r\n  setWeatherParam: React.Dispatch<React.SetStateAction<WeatherParam | null>>\r\n}\r\nfunction WeatherParamSetSection(props: WeatherParamSetSectionProps){\r\n  const [city, setCity] = useState<string>(props.weatherParam?.city || '');\r\n  const [town, setTown] = useState<string>(props.weatherParam?.town || '');\r\n\r\n  const handleSetCity = (newCity: string) => {\r\n    // remove town if reselect\r\n    setCity(newCity);\r\n    setTown('');\r\n  }\r\n  const handleSubmit = () => {\r\n    props.setWeatherParam({\r\n      city,\r\n      town\r\n    });\r\n  }\r\n  const handelCancel = () => {\r\n    setCity(props.weatherParam?.city || '');\r\n    setTown(props.weatherParam?.town || '');\r\n  }\r\n\r\n  type city_data_key = keyof typeof CITY_MAP.city_data;\r\n\r\n  return ( \r\n    <MyForm\r\n      submit_func={handleSubmit}\r\n      cancel_func={handelCancel}\r\n      question={CONTENT_MAP.setting_weather}\r\n    >\r\n      <SelectInputComponent\r\n        label={CONTENT_MAP.select_city_label}\r\n        value={city}\r\n        setValue={handleSetCity}\r\n        option_list={CITY_MAP.cities}\r\n      />\r\n      <SelectInputComponent\r\n        label={CONTENT_MAP.select_town_label}\r\n        value={town}\r\n        setValue={setTown}\r\n        option_list={\r\n          city !== '' ?\r\n          CITY_MAP.city_data[city as city_data_key].town_list:\r\n          []\r\n        }\r\n      />\r\n    </MyForm>\r\n  );\r\n}\r\n\r\ninterface CalendarParamSetSectionProps {\r\n  calendarParam: CalendarParam | null\r\n  setCalendarParam: React.Dispatch<React.SetStateAction<CalendarParam | null>>,\r\n  cur_week: Array<Date>\r\n}\r\nfunction CalendarParamSetSection(props: CalendarParamSetSectionProps){\r\n  const [api_key, setAPIKey] = useState<string>(props.calendarParam?.api_key || '');\r\n  const [calendar_id, setCalendarID] = useState<string>(props.calendarParam?.calendar_id || '');\r\n  const [use_example_data, setUseEx] = useState<boolean>(props.calendarParam?.use_example_data || true);\r\n  const handleSubmit = () => {\r\n    props.setCalendarParam({\r\n      api_key,\r\n      calendar_id,\r\n      use_example_data,\r\n      time_min: props.cur_week[0].toISOString(),\r\n      time_max: props.cur_week[6].toISOString()\r\n    });\r\n  }\r\n  const handelCancel = () => {\r\n    setAPIKey(props.calendarParam?.api_key || '');\r\n    setCalendarID(props.calendarParam?.calendar_id || '');\r\n    setUseEx(props.calendarParam?.use_example_data || true);\r\n  }\r\n  return ( \r\n    <MyForm\r\n      submit_func={handleSubmit}\r\n      cancel_func={handelCancel}\r\n      question={CONTENT_MAP.setting_calendar}\r\n    >\r\n      <ToggleCheckComponent\r\n        label={CONTENT_MAP.calendar_source_label}\r\n        value={use_example_data}\r\n        setValue={setUseEx}\r\n        msg_checked={CONTENT_MAP.calendar_source_msg_checked}\r\n      />\r\n      {(!use_example_data) && (\r\n        <>\r\n        <PasswordInputComponent\r\n          icon_cls_name={ICON_MAP.calendar_api_key}\r\n          label={CONTENT_MAP.calendar_api_key_label}\r\n          value={api_key}\r\n          setValue={setAPIKey}\r\n        />\r\n        <PasswordInputComponent\r\n          icon_cls_name={ICON_MAP.calendar_id}\r\n          label={CONTENT_MAP.calendar_id_label}\r\n          value={calendar_id}\r\n          setValue={setCalendarID}\r\n        />\r\n        </>\r\n      )}\r\n    </MyForm>\r\n  );\r\n}\r\n","import { useState, useMemo } from 'react';\nimport {\n  getWeather3DayState, getWeatherWeekState, getCalendarState,\n  useTimeState\n} from './service/stateControllers';\n\nimport Weather3DaySection from './sections/Weather3DaySection';\nimport WeatherWeekSection from './sections/WeatherWeekSection';\nimport ScheduleSection from './sections/ScheduleSection';\nimport SettingSection from './sections/SettingSection';\n\nimport './App.css';\nimport './datastore/WeatherIcon/css/weather-icons.min.css';\n\nexport default function App(){\n  const [timeState, refresh] = useTimeState();\n  const [weatherParam, setWeatherParam] = useState<WeatherParam | null>(null);\n\n  const weather3DayState = getWeather3DayState(weatherParam, timeState.cur_week);\n  const weatherWeekState = getWeatherWeekState(weatherParam, timeState.cur_week);\n  \n  const [calendarParam, setCalendarParam] = useState<CalendarParam | null>(null);\n  const calendarState = getCalendarState(calendarParam, timeState.cur_week);\n\n  const Forecast3Day = useMemo(()=> (\n    <Weather3DaySection\n      state={weather3DayState}\n    />\n  ), [weather3DayState]);\n  \n  const ForecastWeek = useMemo(()=> (\n    <WeatherWeekSection\n      display_week={timeState.display_week}\n      state={weatherWeekState}\n    />\n  ), [weatherWeekState, timeState.display_week]);\n\n  const Schedule = useMemo(()=> (\n    <ScheduleSection\n      display_week={timeState.display_week}\n      weatherState={weatherWeekState}\n      calendarState={calendarState}\n    />\n  ), [weatherWeekState, calendarState, timeState.display_week]);\n\n  const Setting = useMemo(()=> (\n    <SettingSection\n      weatherParam={weatherParam}\n      setWeatherParam={setWeatherParam}\n      calendarParam={calendarParam}\n      setCalendarParam={setCalendarParam}\n      cur_week={timeState.cur_week}\n    />\n  ), [weatherParam, calendarParam, timeState.cur_week]);\n  \n  // auto refresh per 3 hrs\n  setInterval(()=> {\n    refresh();\n  }, 60 * 60 * 3 * 1000);\n\n  return (\n    <div className=\"App\">\n      <header id='app-setting'>\n        {Setting}\n      </header>\n      <main id=\"app-main\">\n        <section id=\"app-weather\" className=\"section\">\n          {Forecast3Day}\n          {ForecastWeek}\n        </section>\n        <section id=\"app-schedule\" className=\"section\">\n          {Schedule}\n        </section>\n      </main>\n    </div>\n  );\n}\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}